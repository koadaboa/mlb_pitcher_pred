2025-03-28 11:44:05,627 - __main__ - INFO - Loading data...
2025-03-28 11:44:05,628 - src.data.db - INFO - Retrieving pitcher data from database...
2025-03-28 11:44:09,140 - src.data.db - INFO - Retrieved 104453 rows of pitcher data with 53 columns
2025-03-28 11:44:09,140 - src.data.db - INFO - Retrieved 20 enhanced feature columns: last_3_games_strikeouts_std, last_5_games_strikeouts_std, last_3_games_velo_std, last_5_games_velo_std, last_3_games_swinging_strike_pct_std...
2025-03-28 11:44:09,141 - __main__ - INFO - Selecting features...
2025-03-28 11:44:09,141 - src.features.selection - INFO - Available columns: ['game_db_id', 'pitcher_id', 'player_name', 'statcast_id', 'game_id', 'game_date', 'season', 'strikeouts', 'hits', 'walks', 'home_runs', 'release_speed_mean', 'release_speed_max', 'release_spin_rate_mean', 'swinging_strike_pct', 'called_strike_pct', 'zone_rate', 'last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'team_changed', 'opponent_team', 'opponent_batting_avg', 'opponent_strikeout_rate', 'opponent_ops', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy']
2025-03-28 11:44:09,141 - src.features.selection - INFO - Selected 31 features for strikeout model: ['last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg']
2025-03-28 11:44:09,151 - __main__ - INFO - Using 63310 rows from years [2019, 2021, 2022] for optimization
2025-03-28 11:44:09,836 - __main__ - INFO - Starting rf optimization with 100 trials...
2025-03-28 11:44:09,836 - __main__ - INFO - Optimizing for within_2_strikeouts (maximize)
2025-03-28 11:44:09,999 - __main__ - ERROR - Error optimizing rf: positional indexers are out-of-bounds
2025-03-28 11:44:10,000 - __main__ - ERROR - Traceback (most recent call last):
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\indexing.py", line 1714, in _get_list_axis
    return self.obj._take_with_is_copy(key, axis=axis)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\generic.py", line 4153, in _take_with_is_copy
    result = self.take(indices=indices, axis=axis)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\generic.py", line 4133, in take
    new_data = self._mgr.take(
               ^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\internals\managers.py", line 891, in take
    indexer = maybe_convert_indices(indexer, n, verify=verify)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\indexers\utils.py", line 282, in maybe_convert_indices
    raise IndexError("indices are out-of-bounds")
IndexError: indices are out-of-bounds

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\users\kekoa\documents\datascience\mlb_pred\src\scripts\optimize_models.py", line 465, in main
    study, best_model, output_dir = optimize_model(
                                    ^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\src\scripts\optimize_models.py", line 424, in optimize_model
    study.optimize(objective, n_trials=n_trials)
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\optuna\study\study.py", line 475, in optimize
    _optimize(
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\optuna\study\_optimize.py", line 63, in _optimize
    _optimize_sequential(
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\optuna\study\_optimize.py", line 160, in _optimize_sequential
    frozen_trial = _run_trial(study, func, catch)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\optuna\study\_optimize.py", line 248, in _run_trial
    raise func_err
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\optuna\study\_optimize.py", line 197, in _run_trial
    value_or_values = func(trial)
                      ^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\src\scripts\optimize_models.py", line 411, in <lambda>
    objective = lambda trial: rf_objective(trial, X, y, cv_splits, primary_metric)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\src\scripts\optimize_models.py", line 143, in rf_objective
    score, betting_metrics = custom_cv_score(model, X, y, cv_splits, scorer=primary_metric)
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\src\scripts\optimize_models.py", line 90, in custom_cv_score
    X_train, X_val = X.iloc[train_idx], X.iloc[val_idx]
                     ~~~~~~^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\indexing.py", line 1191, in __getitem__
    return self._getitem_axis(maybe_callable, axis=axis)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\indexing.py", line 1743, in _getitem_axis
    return self._get_list_axis(key, axis=axis)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\indexing.py", line 1717, in _get_list_axis
    raise IndexError("positional indexers are out-of-bounds") from err
IndexError: positional indexers are out-of-bounds

2025-03-28 11:44:10,000 - __main__ - INFO - Loading data...
2025-03-28 11:44:10,000 - src.data.db - INFO - Retrieving pitcher data from database...
2025-03-28 11:44:13,564 - src.data.db - INFO - Retrieved 104453 rows of pitcher data with 53 columns
2025-03-28 11:44:13,565 - src.data.db - INFO - Retrieved 20 enhanced feature columns: last_3_games_strikeouts_std, last_5_games_strikeouts_std, last_3_games_velo_std, last_5_games_velo_std, last_3_games_swinging_strike_pct_std...
2025-03-28 11:44:13,565 - __main__ - INFO - Selecting features...
2025-03-28 11:44:13,565 - src.features.selection - INFO - Available columns: ['game_db_id', 'pitcher_id', 'player_name', 'statcast_id', 'game_id', 'game_date', 'season', 'strikeouts', 'hits', 'walks', 'home_runs', 'release_speed_mean', 'release_speed_max', 'release_spin_rate_mean', 'swinging_strike_pct', 'called_strike_pct', 'zone_rate', 'last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'team_changed', 'opponent_team', 'opponent_batting_avg', 'opponent_strikeout_rate', 'opponent_ops', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy']
2025-03-28 11:44:13,565 - src.features.selection - INFO - Selected 31 features for strikeout model: ['last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg']
2025-03-28 11:44:13,576 - __main__ - INFO - Using 63310 rows from years [2019, 2021, 2022] for optimization
2025-03-28 11:44:13,742 - __main__ - INFO - Starting xgboost optimization with 100 trials...
2025-03-28 11:44:13,742 - __main__ - INFO - Optimizing for within_2_strikeouts (maximize)
2025-03-28 11:44:13,821 - __main__ - ERROR - Error optimizing xgboost: positional indexers are out-of-bounds
2025-03-28 11:44:13,821 - __main__ - ERROR - Traceback (most recent call last):
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\indexing.py", line 1714, in _get_list_axis
    return self.obj._take_with_is_copy(key, axis=axis)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\generic.py", line 4153, in _take_with_is_copy
    result = self.take(indices=indices, axis=axis)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\generic.py", line 4133, in take
    new_data = self._mgr.take(
               ^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\internals\managers.py", line 891, in take
    indexer = maybe_convert_indices(indexer, n, verify=verify)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\indexers\utils.py", line 282, in maybe_convert_indices
    raise IndexError("indices are out-of-bounds")
IndexError: indices are out-of-bounds

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\users\kekoa\documents\datascience\mlb_pred\src\scripts\optimize_models.py", line 465, in main
    study, best_model, output_dir = optimize_model(
                                    ^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\src\scripts\optimize_models.py", line 424, in optimize_model
    study.optimize(objective, n_trials=n_trials)
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\optuna\study\study.py", line 475, in optimize
    _optimize(
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\optuna\study\_optimize.py", line 63, in _optimize
    _optimize_sequential(
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\optuna\study\_optimize.py", line 160, in _optimize_sequential
    frozen_trial = _run_trial(study, func, catch)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\optuna\study\_optimize.py", line 248, in _run_trial
    raise func_err
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\optuna\study\_optimize.py", line 197, in _run_trial
    value_or_values = func(trial)
                      ^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\src\scripts\optimize_models.py", line 413, in <lambda>
    objective = lambda trial: xgb_objective(trial, X, y, cv_splits, primary_metric)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\src\scripts\optimize_models.py", line 178, in xgb_objective
    score, betting_metrics = custom_cv_score(model, X, y, cv_splits, scorer=primary_metric)
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\src\scripts\optimize_models.py", line 90, in custom_cv_score
    X_train, X_val = X.iloc[train_idx], X.iloc[val_idx]
                     ~~~~~~^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\indexing.py", line 1191, in __getitem__
    return self._getitem_axis(maybe_callable, axis=axis)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\indexing.py", line 1743, in _getitem_axis
    return self._get_list_axis(key, axis=axis)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\indexing.py", line 1717, in _get_list_axis
    raise IndexError("positional indexers are out-of-bounds") from err
IndexError: positional indexers are out-of-bounds

2025-03-28 11:44:13,822 - __main__ - INFO - Loading data...
2025-03-28 11:44:13,822 - src.data.db - INFO - Retrieving pitcher data from database...
2025-03-28 11:44:17,304 - src.data.db - INFO - Retrieved 104453 rows of pitcher data with 53 columns
2025-03-28 11:44:17,304 - src.data.db - INFO - Retrieved 20 enhanced feature columns: last_3_games_strikeouts_std, last_5_games_strikeouts_std, last_3_games_velo_std, last_5_games_velo_std, last_3_games_swinging_strike_pct_std...
2025-03-28 11:44:17,304 - __main__ - INFO - Selecting features...
2025-03-28 11:44:17,304 - src.features.selection - INFO - Available columns: ['game_db_id', 'pitcher_id', 'player_name', 'statcast_id', 'game_id', 'game_date', 'season', 'strikeouts', 'hits', 'walks', 'home_runs', 'release_speed_mean', 'release_speed_max', 'release_spin_rate_mean', 'swinging_strike_pct', 'called_strike_pct', 'zone_rate', 'last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'team_changed', 'opponent_team', 'opponent_batting_avg', 'opponent_strikeout_rate', 'opponent_ops', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy']
2025-03-28 11:44:17,304 - src.features.selection - INFO - Selected 31 features for strikeout model: ['last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg']
2025-03-28 11:44:17,315 - __main__ - INFO - Using 63310 rows from years [2019, 2021, 2022] for optimization
2025-03-28 11:44:17,483 - __main__ - INFO - Starting lightgbm optimization with 100 trials...
2025-03-28 11:44:17,483 - __main__ - INFO - Optimizing for within_2_strikeouts (maximize)
2025-03-28 11:44:17,568 - __main__ - ERROR - Error optimizing lightgbm: positional indexers are out-of-bounds
2025-03-28 11:44:17,569 - __main__ - ERROR - Traceback (most recent call last):
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\indexing.py", line 1714, in _get_list_axis
    return self.obj._take_with_is_copy(key, axis=axis)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\generic.py", line 4153, in _take_with_is_copy
    result = self.take(indices=indices, axis=axis)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\generic.py", line 4133, in take
    new_data = self._mgr.take(
               ^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\internals\managers.py", line 891, in take
    indexer = maybe_convert_indices(indexer, n, verify=verify)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\indexers\utils.py", line 282, in maybe_convert_indices
    raise IndexError("indices are out-of-bounds")
IndexError: indices are out-of-bounds

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\users\kekoa\documents\datascience\mlb_pred\src\scripts\optimize_models.py", line 465, in main
    study, best_model, output_dir = optimize_model(
                                    ^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\src\scripts\optimize_models.py", line 424, in optimize_model
    study.optimize(objective, n_trials=n_trials)
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\optuna\study\study.py", line 475, in optimize
    _optimize(
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\optuna\study\_optimize.py", line 63, in _optimize
    _optimize_sequential(
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\optuna\study\_optimize.py", line 160, in _optimize_sequential
    frozen_trial = _run_trial(study, func, catch)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\optuna\study\_optimize.py", line 248, in _run_trial
    raise func_err
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\optuna\study\_optimize.py", line 197, in _run_trial
    value_or_values = func(trial)
                      ^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\src\scripts\optimize_models.py", line 415, in <lambda>
    objective = lambda trial: lgb_objective(trial, X, y, cv_splits, primary_metric)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\src\scripts\optimize_models.py", line 215, in lgb_objective
    score, betting_metrics = custom_cv_score(model, X, y, cv_splits, scorer=primary_metric)
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\src\scripts\optimize_models.py", line 90, in custom_cv_score
    X_train, X_val = X.iloc[train_idx], X.iloc[val_idx]
                     ~~~~~~^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\indexing.py", line 1191, in __getitem__
    return self._getitem_axis(maybe_callable, axis=axis)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\indexing.py", line 1743, in _getitem_axis
    return self._get_list_axis(key, axis=axis)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\users\kekoa\documents\datascience\mlb_pred\venv\Lib\site-packages\pandas\core\indexing.py", line 1717, in _get_list_axis
    raise IndexError("positional indexers are out-of-bounds") from err
IndexError: positional indexers are out-of-bounds

2025-03-28 11:49:09,843 - __main__ - INFO - Loading data...
2025-03-28 11:49:09,843 - src.data.db - INFO - Retrieving pitcher data from database...
2025-03-28 11:49:13,072 - src.data.db - INFO - Retrieved 104453 rows of pitcher data with 53 columns
2025-03-28 11:49:13,072 - src.data.db - INFO - Retrieved 20 enhanced feature columns: last_3_games_strikeouts_std, last_5_games_strikeouts_std, last_3_games_velo_std, last_5_games_velo_std, last_3_games_swinging_strike_pct_std...
2025-03-28 11:49:13,072 - __main__ - INFO - Selecting features...
2025-03-28 11:49:13,072 - src.features.selection - INFO - Available columns: ['game_db_id', 'pitcher_id', 'player_name', 'statcast_id', 'game_id', 'game_date', 'season', 'strikeouts', 'hits', 'walks', 'home_runs', 'release_speed_mean', 'release_speed_max', 'release_spin_rate_mean', 'swinging_strike_pct', 'called_strike_pct', 'zone_rate', 'last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'team_changed', 'opponent_team', 'opponent_batting_avg', 'opponent_strikeout_rate', 'opponent_ops', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy']
2025-03-28 11:49:13,072 - src.features.selection - INFO - Selected 31 features for strikeout model: ['last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg']
2025-03-28 11:49:13,082 - __main__ - INFO - Using 63310 rows from years [2019, 2021, 2022] for optimization
2025-03-28 11:49:13,537 - __main__ - INFO - Starting rf optimization with 20 trials...
2025-03-28 11:49:13,537 - __main__ - INFO - Optimizing for within_2_strikeouts (maximize)
2025-03-28 11:51:58,476 - __main__ - INFO - Trial 0: within_2_strikeouts=87.4506, Within 2 K: 87.45%, Over/Under: 73.67%, Params: {'n_estimators': 164, 'max_depth': 29, 'min_samples_split': 3, 'min_samples_leaf': 2, 'max_features': 'log2', 'bootstrap': False, 'random_state': 42}
2025-03-28 11:54:50,732 - __main__ - INFO - Trial 1: within_2_strikeouts=88.0935, Within 2 K: 88.09%, Over/Under: 73.63%, Params: {'n_estimators': 382, 'max_depth': 7, 'min_samples_split': 8, 'min_samples_leaf': 3, 'max_features': 'sqrt', 'bootstrap': False, 'random_state': 42}
2025-03-28 11:55:54,382 - __main__ - INFO - Trial 2: within_2_strikeouts=87.6970, Within 2 K: 87.70%, Over/Under: 73.73%, Params: {'n_estimators': 120, 'max_depth': 15, 'min_samples_split': 12, 'min_samples_leaf': 8, 'max_features': 'sqrt', 'bootstrap': True, 'random_state': 42}
2025-03-28 12:00:13,735 - __main__ - INFO - Trial 3: within_2_strikeouts=87.2832, Within 2 K: 87.28%, Over/Under: 73.63%, Params: {'n_estimators': 75, 'max_depth': 17, 'min_samples_split': 9, 'min_samples_leaf': 2, 'max_features': None, 'bootstrap': True, 'random_state': 42}
2025-03-28 12:03:53,915 - __main__ - INFO - Trial 4: within_2_strikeouts=87.6244, Within 2 K: 87.62%, Over/Under: 73.69%, Params: {'n_estimators': 384, 'max_depth': 25, 'min_samples_split': 10, 'min_samples_leaf': 3, 'max_features': 'log2', 'bootstrap': True, 'random_state': 42}
2025-03-28 12:05:59,188 - __main__ - INFO - Trial 5: within_2_strikeouts=87.4333, Within 2 K: 87.43%, Over/Under: 73.70%, Params: {'n_estimators': 116, 'max_depth': 25, 'min_samples_split': 19, 'min_samples_leaf': 2, 'max_features': 'sqrt', 'bootstrap': False, 'random_state': 42}
2025-03-28 12:08:08,415 - __main__ - INFO - Trial 6: within_2_strikeouts=87.5770, Within 2 K: 87.58%, Over/Under: 73.69%, Params: {'n_estimators': 145, 'max_depth': 17, 'min_samples_split': 10, 'min_samples_leaf': 7, 'max_features': 'sqrt', 'bootstrap': False, 'random_state': 42}
2025-03-28 12:13:56,118 - __main__ - INFO - Trial 7: within_2_strikeouts=87.6228, Within 2 K: 87.62%, Over/Under: 73.69%, Params: {'n_estimators': 486, 'max_depth': 24, 'min_samples_split': 8, 'min_samples_leaf': 2, 'max_features': 'sqrt', 'bootstrap': True, 'random_state': 42}
2025-03-28 12:17:01,705 - __main__ - INFO - Trial 8: within_2_strikeouts=87.6086, Within 2 K: 87.61%, Over/Under: 73.71%, Params: {'n_estimators': 323, 'max_depth': 30, 'min_samples_split': 20, 'min_samples_leaf': 2, 'max_features': 'log2', 'bootstrap': True, 'random_state': 42}
2025-03-28 12:24:17,951 - __main__ - INFO - Trial 9: within_2_strikeouts=87.5786, Within 2 K: 87.58%, Over/Under: 73.70%, Params: {'n_estimators': 467, 'max_depth': 19, 'min_samples_split': 17, 'min_samples_leaf': 9, 'max_features': 'sqrt', 'bootstrap': False, 'random_state': 42}
2025-03-28 12:32:01,173 - __main__ - INFO - Trial 10: within_2_strikeouts=87.2500, Within 2 K: 87.25%, Over/Under: 73.54%, Params: {'n_estimators': 237, 'max_depth': 5, 'min_samples_split': 3, 'min_samples_leaf': 5, 'max_features': None, 'bootstrap': False, 'random_state': 42}
2025-03-28 12:33:17,193 - __main__ - INFO - Trial 11: within_2_strikeouts=88.0588, Within 2 K: 88.06%, Over/Under: 73.62%, Params: {'n_estimators': 257, 'max_depth': 7, 'min_samples_split': 13, 'min_samples_leaf': 10, 'max_features': 'sqrt', 'bootstrap': True, 'random_state': 42}
2025-03-28 12:35:00,496 - __main__ - INFO - Trial 12: within_2_strikeouts=88.1756, Within 2 K: 88.18%, Over/Under: 73.56%, Params: {'n_estimators': 267, 'max_depth': 6, 'min_samples_split': 13, 'min_samples_leaf': 5, 'max_features': 'sqrt', 'bootstrap': False, 'random_state': 42}
2025-03-28 12:38:43,462 - __main__ - INFO - Trial 13: within_2_strikeouts=87.8913, Within 2 K: 87.89%, Over/Under: 73.69%, Params: {'n_estimators': 367, 'max_depth': 10, 'min_samples_split': 15, 'min_samples_leaf': 5, 'max_features': 'sqrt', 'bootstrap': False, 'random_state': 42}
2025-03-28 13:04:21,061 - __main__ - INFO - Trial 14: within_2_strikeouts=85.9138, Within 2 K: 85.91%, Over/Under: 72.94%, Params: {'n_estimators': 397, 'max_depth': 11, 'min_samples_split': 6, 'min_samples_leaf': 4, 'max_features': None, 'bootstrap': False, 'random_state': 42}
2025-03-28 13:06:33,820 - __main__ - INFO - Trial 15: within_2_strikeouts=87.8124, Within 2 K: 87.81%, Over/Under: 73.69%, Params: {'n_estimators': 203, 'max_depth': 11, 'min_samples_split': 6, 'min_samples_leaf': 6, 'max_features': 'sqrt', 'bootstrap': False, 'random_state': 42}
2025-03-28 13:09:13,924 - __main__ - INFO - Trial 16: within_2_strikeouts=87.9893, Within 2 K: 87.99%, Over/Under: 73.62%, Params: {'n_estimators': 322, 'max_depth': 8, 'min_samples_split': 14, 'min_samples_leaf': 4, 'max_features': 'sqrt', 'bootstrap': False, 'random_state': 42}
2025-03-28 13:10:51,373 - __main__ - INFO - Trial 17: within_2_strikeouts=88.2862, Within 2 K: 88.29%, Over/Under: 73.44%, Params: {'n_estimators': 302, 'max_depth': 5, 'min_samples_split': 7, 'min_samples_leaf': 6, 'max_features': 'sqrt', 'bootstrap': False, 'random_state': 42}
2025-03-28 13:34:34,004 - __main__ - INFO - Trial 18: within_2_strikeouts=84.8476, Within 2 K: 84.85%, Over/Under: 72.19%, Params: {'n_estimators': 309, 'max_depth': 14, 'min_samples_split': 16, 'min_samples_leaf': 7, 'max_features': None, 'bootstrap': False, 'random_state': 42}
2025-03-28 13:35:27,907 - __main__ - INFO - Trial 19: within_2_strikeouts=88.3004, Within 2 K: 88.30%, Over/Under: 73.47%, Params: {'n_estimators': 202, 'max_depth': 5, 'min_samples_split': 6, 'min_samples_leaf': 6, 'max_features': 'log2', 'bootstrap': False, 'random_state': 42}
2025-03-28 13:35:27,947 - __main__ - INFO - Optimization completed in 106.24 minutes
2025-03-28 13:35:27,950 - __main__ - INFO - Best value: 88.30042647291108
2025-03-28 13:35:27,953 - __main__ - INFO - Best params: {'n_estimators': 202, 'max_depth': 5, 'min_samples_split': 6, 'min_samples_leaf': 6, 'max_features': 'log2', 'bootstrap': False}
2025-03-28 13:35:42,906 - __main__ - INFO - Best rf model saved to models\optimization\rf_20250328_114909\optimized_rf_model.pkl
2025-03-28 13:35:42,906 - __main__ - INFO - Optimization for rf completed. Results saved to models\optimization\rf_20250328_114909
2025-03-28 13:38:40,753 - __main__ - INFO - Loading data...
2025-03-28 13:38:40,753 - src.data.db - INFO - Retrieving pitcher data from database...
2025-03-28 13:38:44,058 - src.data.db - INFO - Retrieved 104453 rows of pitcher data with 53 columns
2025-03-28 13:38:44,059 - src.data.db - INFO - Retrieved 20 enhanced feature columns: last_3_games_strikeouts_std, last_5_games_strikeouts_std, last_3_games_velo_std, last_5_games_velo_std, last_3_games_swinging_strike_pct_std...
2025-03-28 13:38:44,059 - __main__ - INFO - Selecting features...
2025-03-28 13:38:44,059 - src.features.selection - INFO - Available columns: ['game_db_id', 'pitcher_id', 'player_name', 'statcast_id', 'game_id', 'game_date', 'season', 'strikeouts', 'hits', 'walks', 'home_runs', 'release_speed_mean', 'release_speed_max', 'release_spin_rate_mean', 'swinging_strike_pct', 'called_strike_pct', 'zone_rate', 'last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'team_changed', 'opponent_team', 'opponent_batting_avg', 'opponent_strikeout_rate', 'opponent_ops', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy']
2025-03-28 13:38:44,059 - src.features.selection - INFO - Selected 31 features for strikeout model: ['last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg']
2025-03-28 13:38:44,070 - __main__ - INFO - Using 63310 rows from years [2019, 2021, 2022] for optimization
2025-03-28 13:38:44,532 - __main__ - INFO - Starting xgboost optimization with 20 trials...
2025-03-28 13:38:44,533 - __main__ - INFO - Optimizing for within_2_strikeouts (maximize)
2025-03-28 13:38:49,613 - __main__ - INFO - Trial 0: within_2_strikeouts=87.1031, Within 2 K: 87.10%, Over/Under: 73.67%, Params: {'n_estimators': 473, 'max_depth': 7, 'learning_rate': 0.08050835820115695, 'subsample': 0.6805239436971511, 'colsample_bytree': 0.9372314276809526, 'min_child_weight': 8, 'gamma': 2.6320386760659424, 'reg_alpha': 4.329424032226016, 'reg_lambda': 2.189869008865131, 'random_state': 42}
2025-03-28 13:38:52,671 - __main__ - INFO - Trial 1: within_2_strikeouts=85.7827, Within 2 K: 85.78%, Over/Under: 73.01%, Params: {'n_estimators': 487, 'max_depth': 10, 'learning_rate': 0.2919489425988284, 'subsample': 0.6912520653862236, 'colsample_bytree': 0.9630123523948622, 'min_child_weight': 9, 'gamma': 4.437249074025377, 'reg_alpha': 1.8641843270726055, 'reg_lambda': 1.1714767027299051, 'random_state': 42}
2025-03-28 13:38:56,849 - __main__ - INFO - Trial 2: within_2_strikeouts=86.3418, Within 2 K: 86.34%, Over/Under: 73.36%, Params: {'n_estimators': 197, 'max_depth': 9, 'learning_rate': 0.17490495217434907, 'subsample': 0.8281987164378164, 'colsample_bytree': 0.7191652569331227, 'min_child_weight': 4, 'gamma': 0.8540733172403958, 'reg_alpha': 1.095289792326939, 'reg_lambda': 3.86131465290986, 'random_state': 42}
2025-03-28 13:38:57,662 - __main__ - INFO - Trial 3: within_2_strikeouts=87.5249, Within 2 K: 87.52%, Over/Under: 73.67%, Params: {'n_estimators': 120, 'max_depth': 3, 'learning_rate': 0.22287885442970712, 'subsample': 0.7099343162599561, 'colsample_bytree': 0.5633391531329296, 'min_child_weight': 7, 'gamma': 2.0748492426972343, 'reg_alpha': 0.6138257471866626, 'reg_lambda': 4.558405061592059, 'random_state': 42}
2025-03-28 13:39:01,183 - __main__ - INFO - Trial 4: within_2_strikeouts=87.4364, Within 2 K: 87.44%, Over/Under: 73.69%, Params: {'n_estimators': 101, 'max_depth': 10, 'learning_rate': 0.05837468679176376, 'subsample': 0.8413691225497528, 'colsample_bytree': 0.6790483499914561, 'min_child_weight': 2, 'gamma': 4.066562310229287, 'reg_alpha': 1.2681038671764067, 'reg_lambda': 2.6704534275372898, 'random_state': 42}
2025-03-28 13:39:02,883 - __main__ - INFO - Trial 5: within_2_strikeouts=87.8503, Within 2 K: 87.85%, Over/Under: 73.74%, Params: {'n_estimators': 283, 'max_depth': 4, 'learning_rate': 0.023001421309256573, 'subsample': 0.8388645535973633, 'colsample_bytree': 0.9687341695018674, 'min_child_weight': 9, 'gamma': 0.6617482880370695, 'reg_alpha': 2.5435323922935793, 'reg_lambda': 3.8169689223356986, 'random_state': 42}
2025-03-28 13:39:09,317 - __main__ - INFO - Trial 6: within_2_strikeouts=86.0733, Within 2 K: 86.07%, Over/Under: 73.30%, Params: {'n_estimators': 437, 'max_depth': 9, 'learning_rate': 0.13991751766693455, 'subsample': 0.5289086096159019, 'colsample_bytree': 0.8637907806264229, 'min_child_weight': 8, 'gamma': 1.8977357538939592, 'reg_alpha': 4.845947460392109, 'reg_lambda': 2.162874677117397, 'random_state': 42}
2025-03-28 13:39:14,107 - __main__ - INFO - Trial 7: within_2_strikeouts=88.2562, Within 2 K: 88.26%, Over/Under: 73.73%, Params: {'n_estimators': 158, 'max_depth': 9, 'learning_rate': 0.016566267483188978, 'subsample': 0.7150451866949961, 'colsample_bytree': 0.7095693598062851, 'min_child_weight': 3, 'gamma': 1.2664290175487036, 'reg_alpha': 1.9195938690028331, 'reg_lambda': 0.8875610737445694, 'random_state': 42}
2025-03-28 13:39:17,752 - __main__ - INFO - Trial 8: within_2_strikeouts=87.2485, Within 2 K: 87.25%, Over/Under: 73.73%, Params: {'n_estimators': 427, 'max_depth': 6, 'learning_rate': 0.06468341349096052, 'subsample': 0.5814148545173266, 'colsample_bytree': 0.9486420593225406, 'min_child_weight': 5, 'gamma': 0.9727138251514378, 'reg_alpha': 3.52560498174326, 'reg_lambda': 1.9393564102773704, 'random_state': 42}
2025-03-28 13:39:23,711 - __main__ - INFO - Trial 9: within_2_strikeouts=88.2483, Within 2 K: 88.25%, Over/Under: 73.76%, Params: {'n_estimators': 78, 'max_depth': 12, 'learning_rate': 0.031648408227037156, 'subsample': 0.7072488189718205, 'colsample_bytree': 0.7383256395480425, 'min_child_weight': 1, 'gamma': 4.5499722705181025, 'reg_alpha': 0.21850398725640985, 'reg_lambda': 4.085692285153914, 'random_state': 42}
2025-03-28 13:39:42,480 - __main__ - INFO - Trial 10: within_2_strikeouts=88.0777, Within 2 K: 88.08%, Over/Under: 73.71%, Params: {'n_estimators': 297, 'max_depth': 12, 'learning_rate': 0.010161091025775434, 'subsample': 0.9600891217115495, 'colsample_bytree': 0.5311070502631731, 'min_child_weight': 3, 'gamma': 3.2402972416459166, 'reg_alpha': 2.8501716306635947, 'reg_lambda': 0.04161603934022473, 'random_state': 42}
2025-03-28 13:39:48,286 - __main__ - INFO - Trial 11: within_2_strikeouts=88.5658, Within 2 K: 88.57%, Over/Under: 73.70%, Params: {'n_estimators': 62, 'max_depth': 12, 'learning_rate': 0.02236916786126005, 'subsample': 0.6201400742784468, 'colsample_bytree': 0.8018393382535705, 'min_child_weight': 1, 'gamma': 4.833738115085778, 'reg_alpha': 0.11959374159112825, 'reg_lambda': 0.09926296534235313, 'random_state': 42}
2025-03-28 13:39:59,620 - __main__ - INFO - Trial 12: within_2_strikeouts=88.1425, Within 2 K: 88.14%, Over/Under: 73.79%, Params: {'n_estimators': 192, 'max_depth': 11, 'learning_rate': 0.014047874607789028, 'subsample': 0.5880380938863425, 'colsample_bytree': 0.8382124935378003, 'min_child_weight': 1, 'gamma': 3.3981842255388397, 'reg_alpha': 1.6414055125459917, 'reg_lambda': 0.08450725762745692, 'random_state': 42}
2025-03-28 13:40:02,311 - __main__ - INFO - Trial 13: within_2_strikeouts=87.7555, Within 2 K: 87.76%, Over/Under: 73.78%, Params: {'n_estimators': 164, 'max_depth': 8, 'learning_rate': 0.027552833837277, 'subsample': 0.5987873165694235, 'colsample_bytree': 0.6326354719343857, 'min_child_weight': 3, 'gamma': 0.03596656085249128, 'reg_alpha': 0.33854510783353686, 'reg_lambda': 0.9235727937638982, 'random_state': 42}
2025-03-28 13:40:03,109 - __main__ - INFO - Trial 14: within_2_strikeouts=88.2451, Within 2 K: 88.25%, Over/Under: 73.72%, Params: {'n_estimators': 55, 'max_depth': 6, 'learning_rate': 0.018054669675144398, 'subsample': 0.7716564871074658, 'colsample_bytree': 0.8103193937291783, 'min_child_weight': 5, 'gamma': 1.6276246327747437, 'reg_alpha': 3.4765634355938446, 'reg_lambda': 0.8404231923585828, 'random_state': 42}
2025-03-28 13:40:08,923 - __main__ - INFO - Trial 15: within_2_strikeouts=87.3669, Within 2 K: 87.37%, Over/Under: 73.71%, Params: {'n_estimators': 223, 'max_depth': 11, 'learning_rate': 0.041650414545773624, 'subsample': 0.6408445063724942, 'colsample_bytree': 0.7853363154841911, 'min_child_weight': 3, 'gamma': 4.939492186756505, 'reg_alpha': 1.9442554646461536, 'reg_lambda': 1.4299403780318887, 'random_state': 42}
2025-03-28 13:40:11,416 - __main__ - INFO - Trial 16: within_2_strikeouts=88.6353, Within 2 K: 88.64%, Over/Under: 73.75%, Params: {'n_estimators': 139, 'max_depth': 8, 'learning_rate': 0.013635160340953014, 'subsample': 0.5101882320818564, 'colsample_bytree': 0.6368651518918804, 'min_child_weight': 1, 'gamma': 3.000811747460935, 'reg_alpha': 0.9151421117321448, 'reg_lambda': 0.5132801758778149, 'random_state': 42}
2025-03-28 13:40:13,772 - __main__ - INFO - Trial 17: within_2_strikeouts=88.2357, Within 2 K: 88.24%, Over/Under: 73.73%, Params: {'n_estimators': 327, 'max_depth': 5, 'learning_rate': 0.010478790404304494, 'subsample': 0.5219643725645795, 'colsample_bytree': 0.6155813897363334, 'min_child_weight': 1, 'gamma': 3.668226999464034, 'reg_alpha': 0.8757653677884764, 'reg_lambda': 0.3948868544271935, 'random_state': 42}
2025-03-28 13:40:15,545 - __main__ - INFO - Trial 18: within_2_strikeouts=87.7476, Within 2 K: 87.75%, Over/Under: 73.79%, Params: {'n_estimators': 133, 'max_depth': 7, 'learning_rate': 0.03728400812060499, 'subsample': 0.5148042823404413, 'colsample_bytree': 0.8809199269638702, 'min_child_weight': 2, 'gamma': 2.8303006969410864, 'reg_alpha': 0.07849409003210872, 'reg_lambda': 2.9614885819609054, 'random_state': 42}
2025-03-28 13:40:18,811 - __main__ - INFO - Trial 19: within_2_strikeouts=87.7334, Within 2 K: 87.73%, Over/Under: 73.79%, Params: {'n_estimators': 238, 'max_depth': 8, 'learning_rate': 0.02081541782304201, 'subsample': 0.6356941528589704, 'colsample_bytree': 0.6542894358683435, 'min_child_weight': 6, 'gamma': 4.995069263789583, 'reg_alpha': 1.318554334194505, 'reg_lambda': 1.6806021103372402, 'random_state': 42}
2025-03-28 13:40:18,839 - __main__ - INFO - Optimization completed in 1.57 minutes
2025-03-28 13:40:18,843 - __main__ - INFO - Best value: 88.63528668456799
2025-03-28 13:40:18,847 - __main__ - INFO - Best params: {'n_estimators': 139, 'max_depth': 8, 'learning_rate': 0.013635160340953014, 'subsample': 0.5101882320818564, 'colsample_bytree': 0.6368651518918804, 'min_child_weight': 1, 'gamma': 3.000811747460935, 'reg_alpha': 0.9151421117321448, 'reg_lambda': 0.5132801758778149}
2025-03-28 13:40:20,970 - __main__ - INFO - Best xgboost model saved to models\optimization\xgboost_20250328_133840\optimized_xgboost_model.pkl
2025-03-28 13:40:20,970 - __main__ - INFO - Optimization for xgboost completed. Results saved to models\optimization\xgboost_20250328_133840
2025-03-28 13:40:59,476 - __main__ - INFO - Loading data...
2025-03-28 13:40:59,477 - src.data.db - INFO - Retrieving pitcher data from database...
2025-03-28 13:41:02,768 - src.data.db - INFO - Retrieved 104453 rows of pitcher data with 53 columns
2025-03-28 13:41:02,768 - src.data.db - INFO - Retrieved 20 enhanced feature columns: last_3_games_strikeouts_std, last_5_games_strikeouts_std, last_3_games_velo_std, last_5_games_velo_std, last_3_games_swinging_strike_pct_std...
2025-03-28 13:41:02,768 - __main__ - INFO - Selecting features...
2025-03-28 13:41:02,768 - src.features.selection - INFO - Available columns: ['game_db_id', 'pitcher_id', 'player_name', 'statcast_id', 'game_id', 'game_date', 'season', 'strikeouts', 'hits', 'walks', 'home_runs', 'release_speed_mean', 'release_speed_max', 'release_spin_rate_mean', 'swinging_strike_pct', 'called_strike_pct', 'zone_rate', 'last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'team_changed', 'opponent_team', 'opponent_batting_avg', 'opponent_strikeout_rate', 'opponent_ops', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy']
2025-03-28 13:41:02,769 - src.features.selection - INFO - Selected 31 features for strikeout model: ['last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg']
2025-03-28 13:41:02,780 - __main__ - INFO - Using 63310 rows from years [2019, 2021, 2022] for optimization
2025-03-28 13:41:03,228 - __main__ - INFO - Starting lightgbm optimization with 20 trials...
2025-03-28 13:41:03,228 - __main__ - INFO - Optimizing for within_2_strikeouts (maximize)
2025-03-28 13:41:04,586 - __main__ - INFO - Trial 0: within_2_strikeouts=87.5960, Within 2 K: 87.60%, Over/Under: 73.79%, Params: {'n_estimators': 390, 'learning_rate': 0.2168787864457512, 'num_leaves': 52, 'max_depth': 6, 'min_data_in_leaf': 67, 'feature_fraction': 0.5374500401277222, 'bagging_fraction': 0.9607323587541267, 'bagging_freq': 3, 'min_gain_to_split': 3.6217255734803784, 'lambda_l1': 4.988716971292912, 'lambda_l2': 4.317824509585872, 'random_state': 42}
2025-03-28 13:41:05,982 - __main__ - INFO - Trial 1: within_2_strikeouts=87.3480, Within 2 K: 87.35%, Over/Under: 73.77%, Params: {'n_estimators': 401, 'learning_rate': 0.19407291436908747, 'num_leaves': 21, 'max_depth': 6, 'min_data_in_leaf': 83, 'feature_fraction': 0.947461346088663, 'bagging_fraction': 0.8078311823502871, 'bagging_freq': 5, 'min_gain_to_split': 3.1250555757904337, 'lambda_l1': 2.9009348563724613, 'lambda_l2': 3.643326114034765, 'random_state': 42}
2025-03-28 13:41:07,253 - __main__ - INFO - Trial 2: within_2_strikeouts=87.5375, Within 2 K: 87.54%, Over/Under: 73.74%, Params: {'n_estimators': 87, 'learning_rate': 0.06395957066469384, 'num_leaves': 74, 'max_depth': 10, 'min_data_in_leaf': 68, 'feature_fraction': 0.9769775106808828, 'bagging_fraction': 0.6393211415010922, 'bagging_freq': 5, 'min_gain_to_split': 2.0333318611395734, 'lambda_l1': 2.4120220807871444, 'lambda_l2': 0.7065369215443068, 'random_state': 42}
2025-03-28 13:41:08,415 - __main__ - INFO - Trial 3: within_2_strikeouts=88.6353, Within 2 K: 88.64%, Over/Under: 73.77%, Params: {'n_estimators': 51, 'learning_rate': 0.03758337169564416, 'num_leaves': 114, 'max_depth': 9, 'min_data_in_leaf': 85, 'feature_fraction': 0.8529504463152238, 'bagging_fraction': 0.7683098771932437, 'bagging_freq': 8, 'min_gain_to_split': 0.9073782127063218, 'lambda_l1': 2.199141822362428, 'lambda_l2': 1.825559100130576, 'random_state': 42}
2025-03-28 13:41:09,349 - __main__ - INFO - Trial 4: within_2_strikeouts=88.2767, Within 2 K: 88.28%, Over/Under: 73.75%, Params: {'n_estimators': 59, 'learning_rate': 0.017286191897905756, 'num_leaves': 87, 'max_depth': 7, 'min_data_in_leaf': 70, 'feature_fraction': 0.7333219991639028, 'bagging_fraction': 0.5221061499234336, 'bagging_freq': 6, 'min_gain_to_split': 4.282454250111411, 'lambda_l1': 0.1643947260710804, 'lambda_l2': 1.9625402513022698, 'random_state': 42}
2025-03-28 13:41:10,904 - __main__ - INFO - Trial 5: within_2_strikeouts=86.8346, Within 2 K: 86.83%, Over/Under: 73.51%, Params: {'n_estimators': 226, 'learning_rate': 0.273282945908665, 'num_leaves': 59, 'max_depth': 5, 'min_data_in_leaf': 80, 'feature_fraction': 0.9109239992123808, 'bagging_fraction': 0.6054022963491127, 'bagging_freq': 2, 'min_gain_to_split': 0.2922268297958902, 'lambda_l1': 0.8087138558968937, 'lambda_l2': 2.04530583084046, 'random_state': 42}
2025-03-28 13:41:12,960 - __main__ - INFO - Trial 6: within_2_strikeouts=87.2674, Within 2 K: 87.27%, Over/Under: 73.69%, Params: {'n_estimators': 400, 'learning_rate': 0.2140632231011503, 'num_leaves': 26, 'max_depth': 10, 'min_data_in_leaf': 32, 'feature_fraction': 0.8010255409521116, 'bagging_fraction': 0.9838658541096473, 'bagging_freq': 1, 'min_gain_to_split': 1.3726167294277163, 'lambda_l1': 2.8454071759322304, 'lambda_l2': 1.1029557372355614, 'random_state': 42}
2025-03-28 13:41:14,283 - __main__ - INFO - Trial 7: within_2_strikeouts=87.0415, Within 2 K: 87.04%, Over/Under: 73.65%, Params: {'n_estimators': 92, 'learning_rate': 0.17695556228863715, 'num_leaves': 147, 'max_depth': 12, 'min_data_in_leaf': 82, 'feature_fraction': 0.6615853967937633, 'bagging_fraction': 0.7999664368000945, 'bagging_freq': 8, 'min_gain_to_split': 1.8969698693265191, 'lambda_l1': 0.656712844988972, 'lambda_l2': 2.794548518493898, 'random_state': 42}
2025-03-28 13:41:15,053 - __main__ - INFO - Trial 8: within_2_strikeouts=87.4380, Within 2 K: 87.44%, Over/Under: 73.69%, Params: {'n_estimators': 145, 'learning_rate': 0.2664893306775549, 'num_leaves': 42, 'max_depth': 3, 'min_data_in_leaf': 26, 'feature_fraction': 0.6876502929840207, 'bagging_fraction': 0.6338019488176169, 'bagging_freq': 10, 'min_gain_to_split': 4.259119423414585, 'lambda_l1': 0.7448531952915649, 'lambda_l2': 3.2682964117458537, 'random_state': 42}
2025-03-28 13:41:16,014 - __main__ - INFO - Trial 9: within_2_strikeouts=87.5280, Within 2 K: 87.53%, Over/Under: 73.68%, Params: {'n_estimators': 235, 'learning_rate': 0.28956322057545125, 'num_leaves': 145, 'max_depth': 4, 'min_data_in_leaf': 54, 'feature_fraction': 0.7886957740525928, 'bagging_fraction': 0.7408634616726186, 'bagging_freq': 9, 'min_gain_to_split': 3.7928678553104698, 'lambda_l1': 4.457800099279306, 'lambda_l2': 2.911619800231085, 'random_state': 42}
2025-03-28 13:41:19,857 - __main__ - INFO - Trial 10: within_2_strikeouts=87.5359, Within 2 K: 87.54%, Over/Under: 73.79%, Params: {'n_estimators': 307, 'learning_rate': 0.02340838009373203, 'num_leaves': 108, 'max_depth': 9, 'min_data_in_leaf': 100, 'feature_fraction': 0.8522929888076837, 'bagging_fraction': 0.8785200038983996, 'bagging_freq': 7, 'min_gain_to_split': 0.4797306588295541, 'lambda_l1': 2.0203824556031695, 'lambda_l2': 0.13542863237098635, 'random_state': 42}
2025-03-28 13:41:21,432 - __main__ - INFO - Trial 11: within_2_strikeouts=88.6811, Within 2 K: 88.68%, Over/Under: 73.75%, Params: {'n_estimators': 153, 'learning_rate': 0.011126348120099109, 'num_leaves': 110, 'max_depth': 8, 'min_data_in_leaf': 100, 'feature_fraction': 0.7049442192033797, 'bagging_fraction': 0.5103358002490554, 'bagging_freq': 7, 'min_gain_to_split': 4.707755384165363, 'lambda_l1': 1.64868460624912, 'lambda_l2': 1.7484216103823034, 'random_state': 42}
2025-03-28 13:41:23,487 - __main__ - INFO - Trial 12: within_2_strikeouts=88.6985, Within 2 K: 88.70%, Over/Under: 73.76%, Params: {'n_estimators': 160, 'learning_rate': 0.01158109135810285, 'num_leaves': 115, 'max_depth': 8, 'min_data_in_leaf': 100, 'feature_fraction': 0.5750361963777496, 'bagging_fraction': 0.7078600482475378, 'bagging_freq': 8, 'min_gain_to_split': 1.1226748450344786, 'lambda_l1': 1.6727010234668125, 'lambda_l2': 1.586984272279314, 'random_state': 42}
2025-03-28 13:41:25,327 - __main__ - INFO - Trial 13: within_2_strikeouts=88.6669, Within 2 K: 88.67%, Over/Under: 73.72%, Params: {'n_estimators': 165, 'learning_rate': 0.010412267596302848, 'num_leaves': 121, 'max_depth': 8, 'min_data_in_leaf': 99, 'feature_fraction': 0.5600870378012862, 'bagging_fraction': 0.5431290563050681, 'bagging_freq': 7, 'min_gain_to_split': 2.7295498491479497, 'lambda_l1': 1.5905577808594988, 'lambda_l2': 1.1145747381322344, 'random_state': 42}
2025-03-28 13:41:27,246 - __main__ - INFO - Trial 14: within_2_strikeouts=88.7206, Within 2 K: 88.72%, Over/Under: 73.74%, Params: {'n_estimators': 162, 'learning_rate': 0.01125098260639053, 'num_leaves': 96, 'max_depth': 8, 'min_data_in_leaf': 41, 'feature_fraction': 0.5951838850555807, 'bagging_fraction': 0.6953538561493344, 'bagging_freq': 10, 'min_gain_to_split': 4.879367714760997, 'lambda_l1': 3.4475745729083815, 'lambda_l2': 1.606063216597887, 'random_state': 42}
2025-03-28 13:41:31,079 - __main__ - INFO - Trial 15: within_2_strikeouts=87.5407, Within 2 K: 87.54%, Over/Under: 73.80%, Params: {'n_estimators': 493, 'learning_rate': 0.019157801743230517, 'num_leaves': 89, 'max_depth': 12, 'min_data_in_leaf': 42, 'feature_fraction': 0.6117375247152685, 'bagging_fraction': 0.7004515741605766, 'bagging_freq': 10, 'min_gain_to_split': 4.985247832075409, 'lambda_l1': 3.673266692125929, 'lambda_l2': 0.03837470594344605, 'random_state': 42}
2025-03-28 13:41:33,791 - __main__ - INFO - Trial 16: within_2_strikeouts=87.4001, Within 2 K: 87.40%, Over/Under: 73.72%, Params: {'n_estimators': 287, 'learning_rate': 0.05904230512772645, 'num_leaves': 129, 'max_depth': 7, 'min_data_in_leaf': 13, 'feature_fraction': 0.6073756828386596, 'bagging_fraction': 0.6815357606816185, 'bagging_freq': 9, 'min_gain_to_split': 1.532888114673944, 'lambda_l1': 3.3584599297850186, 'lambda_l2': 1.1808885340529798, 'random_state': 42}
2025-03-28 13:41:36,456 - __main__ - INFO - Trial 17: within_2_strikeouts=87.6054, Within 2 K: 87.61%, Over/Under: 73.80%, Params: {'n_estimators': 224, 'learning_rate': 0.030320412960782535, 'num_leaves': 101, 'max_depth': 10, 'min_data_in_leaf': 51, 'feature_fraction': 0.515259158217566, 'bagging_fraction': 0.8659292212145823, 'bagging_freq': 10, 'min_gain_to_split': 2.4021689059915636, 'lambda_l1': 3.758147268423811, 'lambda_l2': 4.940345228397415, 'random_state': 42}
2025-03-28 13:41:37,529 - __main__ - INFO - Trial 18: within_2_strikeouts=87.4649, Within 2 K: 87.46%, Over/Under: 73.75%, Params: {'n_estimators': 125, 'learning_rate': 0.09817489646116694, 'num_leaves': 72, 'max_depth': 6, 'min_data_in_leaf': 39, 'feature_fraction': 0.6146582405717473, 'bagging_fraction': 0.5732238428333776, 'bagging_freq': 9, 'min_gain_to_split': 0.8114470006681307, 'lambda_l1': 1.3980547922411475, 'lambda_l2': 2.40120938529597, 'random_state': 42}
2025-03-28 13:41:40,413 - __main__ - INFO - Trial 19: within_2_strikeouts=88.2151, Within 2 K: 88.22%, Over/Under: 73.75%, Params: {'n_estimators': 200, 'learning_rate': 0.015189744313095886, 'num_leaves': 132, 'max_depth': 9, 'min_data_in_leaf': 11, 'feature_fraction': 0.5808270560352286, 'bagging_fraction': 0.6999133237305932, 'bagging_freq': 4, 'min_gain_to_split': 3.0695296017257725, 'lambda_l1': 4.305084929452848, 'lambda_l2': 0.6427706819114376, 'random_state': 42}
2025-03-28 13:41:40,439 - __main__ - INFO - Optimization completed in 0.62 minutes
2025-03-28 13:41:40,442 - __main__ - INFO - Best value: 88.7205812667825
2025-03-28 13:41:40,445 - __main__ - INFO - Best params: {'n_estimators': 162, 'learning_rate': 0.01125098260639053, 'num_leaves': 96, 'max_depth': 8, 'min_data_in_leaf': 41, 'feature_fraction': 0.5951838850555807, 'bagging_fraction': 0.6953538561493344, 'bagging_freq': 10, 'min_gain_to_split': 4.879367714760997, 'lambda_l1': 3.4475745729083815, 'lambda_l2': 1.606063216597887}
2025-03-28 13:41:42,558 - __main__ - INFO - Best lightgbm model saved to models\optimization\lightgbm_20250328_134059\optimized_lightgbm_model.pkl
2025-03-28 13:41:42,558 - __main__ - INFO - Optimization for lightgbm completed. Results saved to models\optimization\lightgbm_20250328_134059
2025-03-28 14:23:17,184 - __main__ - INFO - Loading data...
2025-03-28 14:23:17,184 - src.data.db - INFO - Retrieving pitcher data from database...
2025-03-28 14:23:20,347 - src.data.db - INFO - Retrieved 104453 rows of pitcher data with 53 columns
2025-03-28 14:23:20,348 - src.data.db - INFO - Retrieved 20 enhanced feature columns: last_3_games_strikeouts_std, last_5_games_strikeouts_std, last_3_games_velo_std, last_5_games_velo_std, last_3_games_swinging_strike_pct_std...
2025-03-28 14:23:20,348 - __main__ - INFO - Selecting features...
2025-03-28 14:23:20,348 - src.features.selection - INFO - Available columns: ['game_db_id', 'pitcher_id', 'player_name', 'statcast_id', 'game_id', 'game_date', 'season', 'strikeouts', 'hits', 'walks', 'home_runs', 'release_speed_mean', 'release_speed_max', 'release_spin_rate_mean', 'swinging_strike_pct', 'called_strike_pct', 'zone_rate', 'last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'team_changed', 'opponent_team', 'opponent_batting_avg', 'opponent_strikeout_rate', 'opponent_ops', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy']
2025-03-28 14:23:20,348 - src.features.selection - INFO - Selected 31 features for strikeout model: ['last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg']
2025-03-28 14:23:20,358 - __main__ - INFO - Using 63310 rows from years [2019, 2021, 2022] for optimization
2025-03-28 14:23:20,819 - __main__ - INFO - Starting rf optimization with 2 trials...
2025-03-28 14:23:20,819 - __main__ - INFO - Optimizing for within_1_strikeout (maximize)
2025-03-28 14:25:27,719 - __main__ - INFO - Trial 0: within_1_strikeout=56.3781, Within 2 K: 87.85%, Over/Under: 73.70%, Params: {'n_estimators': 312, 'max_depth': 13, 'min_samples_split': 15, 'min_samples_leaf': 2, 'max_features': 'log2', 'bootstrap': True, 'random_state': 42}
2025-03-28 14:30:02,208 - __main__ - INFO - Trial 1: within_1_strikeout=56.4397, Within 2 K: 87.75%, Over/Under: 73.69%, Params: {'n_estimators': 436, 'max_depth': 13, 'min_samples_split': 8, 'min_samples_leaf': 1, 'max_features': 'log2', 'bootstrap': False, 'random_state': 42}
2025-03-28 14:30:02,241 - __main__ - INFO - Optimization completed in 6.69 minutes
2025-03-28 14:30:02,243 - __main__ - INFO - Best value: 56.43974095719476
2025-03-28 14:30:02,246 - __main__ - INFO - Best params: {'n_estimators': 436, 'max_depth': 13, 'min_samples_split': 8, 'min_samples_leaf': 1, 'max_features': 'log2', 'bootstrap': False}
2025-03-28 14:31:16,244 - __main__ - INFO - Best rf model saved to models\optimization\rf_20250328_142317\optimized_rf_model.pkl
2025-03-28 14:31:16,244 - __main__ - INFO - Optimization for rf completed. Results saved to models\optimization\rf_20250328_142317
2025-03-28 14:31:44,148 - __main__ - INFO - Loading data...
2025-03-28 14:31:44,148 - src.data.db - INFO - Retrieving pitcher data from database...
2025-03-28 14:31:47,317 - src.data.db - INFO - Retrieved 104453 rows of pitcher data with 53 columns
2025-03-28 14:31:47,317 - src.data.db - INFO - Retrieved 20 enhanced feature columns: last_3_games_strikeouts_std, last_5_games_strikeouts_std, last_3_games_velo_std, last_5_games_velo_std, last_3_games_swinging_strike_pct_std...
2025-03-28 14:31:47,317 - __main__ - INFO - Selecting features...
2025-03-28 14:31:47,317 - src.features.selection - INFO - Available columns: ['game_db_id', 'pitcher_id', 'player_name', 'statcast_id', 'game_id', 'game_date', 'season', 'strikeouts', 'hits', 'walks', 'home_runs', 'release_speed_mean', 'release_speed_max', 'release_spin_rate_mean', 'swinging_strike_pct', 'called_strike_pct', 'zone_rate', 'last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'team_changed', 'opponent_team', 'opponent_batting_avg', 'opponent_strikeout_rate', 'opponent_ops', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy']
2025-03-28 14:31:47,318 - src.features.selection - INFO - Selected 31 features for strikeout model: ['last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg']
2025-03-28 14:31:47,327 - __main__ - INFO - Using 63310 rows from years [2019, 2021, 2022] for optimization
2025-03-28 14:31:47,773 - __main__ - INFO - Starting xgboost optimization with 50 trials...
2025-03-28 14:31:47,773 - __main__ - INFO - Optimizing for within_1_strikeout (maximize)
2025-03-28 14:31:49,593 - __main__ - INFO - Trial 0: within_1_strikeout=57.1063, Within 2 K: 87.66%, Over/Under: 73.70%, Params: {'n_estimators': 360, 'max_depth': 3, 'learning_rate': 0.032728812002772854, 'subsample': 0.8352107995256879, 'colsample_bytree': 0.8521673619406278, 'min_child_weight': 8, 'gamma': 4.490198392068816, 'reg_alpha': 3.8948040924337213, 'reg_lambda': 2.7033972462941303, 'random_state': 42}
2025-03-28 14:31:55,276 - __main__ - INFO - Trial 1: within_1_strikeout=57.0873, Within 2 K: 87.30%, Over/Under: 73.72%, Params: {'n_estimators': 107, 'max_depth': 12, 'learning_rate': 0.04589176971614396, 'subsample': 0.6876213329149758, 'colsample_bytree': 0.9063160230363212, 'min_child_weight': 4, 'gamma': 4.768767174332935, 'reg_alpha': 0.26560349470868494, 'reg_lambda': 1.039011426806039, 'random_state': 42}
2025-03-28 14:31:58,279 - __main__ - INFO - Trial 2: within_1_strikeout=56.7256, Within 2 K: 86.46%, Over/Under: 73.41%, Params: {'n_estimators': 57, 'max_depth': 12, 'learning_rate': 0.2288666568459555, 'subsample': 0.8100943895427746, 'colsample_bytree': 0.6234316186311262, 'min_child_weight': 10, 'gamma': 1.5983616373981642, 'reg_alpha': 1.873080332831973, 'reg_lambda': 4.829054602055619, 'random_state': 42}
2025-03-28 14:32:05,183 - __main__ - INFO - Trial 3: within_1_strikeout=56.9910, Within 2 K: 86.80%, Over/Under: 73.62%, Params: {'n_estimators': 246, 'max_depth': 12, 'learning_rate': 0.09420739619184391, 'subsample': 0.7099412744902655, 'colsample_bytree': 0.7519294853621782, 'min_child_weight': 9, 'gamma': 2.121168858755238, 'reg_alpha': 2.895783085258707, 'reg_lambda': 3.4176048559779204, 'random_state': 42}
2025-03-28 14:32:07,745 - __main__ - INFO - Trial 4: within_1_strikeout=57.1869, Within 2 K: 87.05%, Over/Under: 73.68%, Params: {'n_estimators': 326, 'max_depth': 6, 'learning_rate': 0.1110567470524392, 'subsample': 0.6657222728351047, 'colsample_bytree': 0.9402361619217147, 'min_child_weight': 8, 'gamma': 3.2620835549240166, 'reg_alpha': 1.0705268157938281, 'reg_lambda': 0.3670213334187211, 'random_state': 42}
2025-03-28 14:32:16,983 - __main__ - INFO - Trial 5: within_1_strikeout=53.5950, Within 2 K: 88.58%, Over/Under: 73.71%, Params: {'n_estimators': 109, 'max_depth': 12, 'learning_rate': 0.017174880944152628, 'subsample': 0.9622793367600992, 'colsample_bytree': 0.5327127019803164, 'min_child_weight': 8, 'gamma': 1.0553821993228985, 'reg_alpha': 0.6996058750623324, 'reg_lambda': 3.4014215773704, 'random_state': 42}
2025-03-28 14:32:23,024 - __main__ - INFO - Trial 6: within_1_strikeout=57.3448, Within 2 K: 87.41%, Over/Under: 73.73%, Params: {'n_estimators': 439, 'max_depth': 9, 'learning_rate': 0.03140032092487777, 'subsample': 0.960698623289906, 'colsample_bytree': 0.5067804131530547, 'min_child_weight': 6, 'gamma': 1.5932179258460182, 'reg_alpha': 4.0082638443294325, 'reg_lambda': 1.49220830992244, 'random_state': 42}
2025-03-28 14:32:24,564 - __main__ - INFO - Trial 7: within_1_strikeout=57.2627, Within 2 K: 87.14%, Over/Under: 73.70%, Params: {'n_estimators': 242, 'max_depth': 5, 'learning_rate': 0.21885907999858614, 'subsample': 0.7759580717454739, 'colsample_bytree': 0.8118954987160182, 'min_child_weight': 7, 'gamma': 4.08649402502289, 'reg_alpha': 2.016227325960362, 'reg_lambda': 3.65942364503477, 'random_state': 42}
2025-03-28 14:32:29,066 - __main__ - INFO - Trial 8: within_1_strikeout=57.2342, Within 2 K: 87.57%, Over/Under: 73.72%, Params: {'n_estimators': 360, 'max_depth': 9, 'learning_rate': 0.025887757429395745, 'subsample': 0.9379374282394854, 'colsample_bytree': 0.6151675749701095, 'min_child_weight': 4, 'gamma': 4.729996604175982, 'reg_alpha': 0.784751382493481, 'reg_lambda': 3.947157087903501, 'random_state': 42}
2025-03-28 14:32:33,767 - __main__ - INFO - Trial 9: within_1_strikeout=56.4287, Within 2 K: 86.05%, Over/Under: 73.30%, Params: {'n_estimators': 255, 'max_depth': 12, 'learning_rate': 0.21144851342874985, 'subsample': 0.6840649207714982, 'colsample_bytree': 0.8872590188154557, 'min_child_weight': 3, 'gamma': 2.368803604162138, 'reg_alpha': 2.892199087830312, 'reg_lambda': 3.8788981793848176, 'random_state': 42}
2025-03-28 14:32:40,331 - __main__ - INFO - Trial 10: within_1_strikeout=57.1537, Within 2 K: 87.70%, Over/Under: 73.74%, Params: {'n_estimators': 496, 'max_depth': 8, 'learning_rate': 0.01126342220431109, 'subsample': 0.5098002518988808, 'colsample_bytree': 0.5017894950541839, 'min_child_weight': 1, 'gamma': 0.05058005025643797, 'reg_alpha': 4.458471760556477, 'reg_lambda': 1.6421908724240084, 'random_state': 42}
2025-03-28 14:32:43,017 - __main__ - INFO - Trial 11: within_1_strikeout=57.3338, Within 2 K: 87.37%, Over/Under: 73.74%, Params: {'n_estimators': 496, 'max_depth': 5, 'learning_rate': 0.08636416390306163, 'subsample': 0.86493552603804, 'colsample_bytree': 0.7653708450573641, 'min_child_weight': 6, 'gamma': 3.3233781727691394, 'reg_alpha': 1.9916817646021234, 'reg_lambda': 2.0953602666933073, 'random_state': 42}
2025-03-28 14:32:46,626 - __main__ - INFO - Trial 12: within_1_strikeout=57.3653, Within 2 K: 87.27%, Over/Under: 73.69%, Params: {'n_estimators': 495, 'max_depth': 9, 'learning_rate': 0.0784448410730341, 'subsample': 0.8938216055802982, 'colsample_bytree': 0.6921097017532355, 'min_child_weight': 6, 'gamma': 3.2080145254228305, 'reg_alpha': 4.985214001547428, 'reg_lambda': 1.896207434484511, 'random_state': 42}
2025-03-28 14:32:51,158 - __main__ - INFO - Trial 13: within_1_strikeout=57.5028, Within 2 K: 87.32%, Over/Under: 73.70%, Params: {'n_estimators': 426, 'max_depth': 10, 'learning_rate': 0.05941533337568952, 'subsample': 0.9022377736160393, 'colsample_bytree': 0.6598302529453481, 'min_child_weight': 5, 'gamma': 3.1768001481029393, 'reg_alpha': 4.864758982546513, 'reg_lambda': 1.2030442969873012, 'random_state': 42}
2025-03-28 14:32:55,718 - __main__ - INFO - Trial 14: within_1_strikeout=57.4112, Within 2 K: 87.32%, Over/Under: 73.68%, Params: {'n_estimators': 426, 'max_depth': 10, 'learning_rate': 0.05907235489769404, 'subsample': 0.8859918280978383, 'colsample_bytree': 0.6730729177452072, 'min_child_weight': 5, 'gamma': 3.315211929703196, 'reg_alpha': 4.888025711248955, 'reg_lambda': 0.5155256174851965, 'random_state': 42}
2025-03-28 14:33:00,380 - __main__ - INFO - Trial 15: within_1_strikeout=57.4728, Within 2 K: 87.41%, Over/Under: 73.73%, Params: {'n_estimators': 417, 'max_depth': 10, 'learning_rate': 0.04710768141415135, 'subsample': 0.9001642434355146, 'colsample_bytree': 0.653220366557602, 'min_child_weight': 4, 'gamma': 3.8532517973539973, 'reg_alpha': 3.6090296681508884, 'reg_lambda': 0.1318580235586695, 'random_state': 42}
2025-03-28 14:33:02,849 - __main__ - INFO - Trial 16: within_1_strikeout=57.3480, Within 2 K: 87.22%, Over/Under: 73.65%, Params: {'n_estimators': 417, 'max_depth': 10, 'learning_rate': 0.13705989896689363, 'subsample': 0.991320041344629, 'colsample_bytree': 0.5905372021564942, 'min_child_weight': 2, 'gamma': 3.9549967328829942, 'reg_alpha': 3.504728998841661, 'reg_lambda': 0.04900230616970713, 'random_state': 42}
2025-03-28 14:33:05,919 - __main__ - INFO - Trial 17: within_1_strikeout=57.5438, Within 2 K: 87.38%, Over/Under: 73.68%, Params: {'n_estimators': 310, 'max_depth': 7, 'learning_rate': 0.05895640458023374, 'subsample': 0.5938465702844243, 'colsample_bytree': 0.6935874490660954, 'min_child_weight': 4, 'gamma': 2.8236067239168374, 'reg_alpha': 3.4508798899403343, 'reg_lambda': 0.9795586128418865, 'random_state': 42}
2025-03-28 14:33:07,960 - __main__ - INFO - Trial 18: within_1_strikeout=57.4048, Within 2 K: 87.39%, Over/Under: 73.69%, Params: {'n_estimators': 189, 'max_depth': 7, 'learning_rate': 0.06184825457691454, 'subsample': 0.6040630267490468, 'colsample_bytree': 0.734672607290558, 'min_child_weight': 2, 'gamma': 2.7772966460526147, 'reg_alpha': 3.1184132890078016, 'reg_lambda': 0.9841995580412864, 'random_state': 42}
2025-03-28 14:33:10,882 - __main__ - INFO - Trial 19: within_1_strikeout=56.6088, Within 2 K: 86.62%, Over/Under: 73.48%, Params: {'n_estimators': 311, 'max_depth': 7, 'learning_rate': 0.14917545397799822, 'subsample': 0.5183262229599938, 'colsample_bytree': 0.5623059128849208, 'min_child_weight': 5, 'gamma': 2.7350184096125307, 'reg_alpha': 4.301554941110664, 'reg_lambda': 2.7569442270528737, 'random_state': 42}
2025-03-28 14:33:12,882 - __main__ - INFO - Trial 20: within_1_strikeout=56.9468, Within 2 K: 87.84%, Over/Under: 73.72%, Params: {'n_estimators': 369, 'max_depth': 4, 'learning_rate': 0.019376323550016037, 'subsample': 0.5832570802517444, 'colsample_bytree': 0.7091912927821723, 'min_child_weight': 3, 'gamma': 1.6982925305402272, 'reg_alpha': 4.520497498741845, 'reg_lambda': 1.0190123009067542, 'random_state': 42}
2025-03-28 14:33:18,348 - __main__ - INFO - Trial 21: within_1_strikeout=57.3717, Within 2 K: 87.34%, Over/Under: 73.73%, Params: {'n_estimators': 393, 'max_depth': 10, 'learning_rate': 0.044699051407575886, 'subsample': 0.7633560192424403, 'colsample_bytree': 0.6518534029412812, 'min_child_weight': 4, 'gamma': 3.752368441514131, 'reg_alpha': 3.6181528233603064, 'reg_lambda': 0.001035905777101831, 'random_state': 42}
2025-03-28 14:33:22,072 - __main__ - INFO - Trial 22: within_1_strikeout=57.4696, Within 2 K: 87.47%, Over/Under: 73.75%, Params: {'n_estimators': 455, 'max_depth': 8, 'learning_rate': 0.040669894296032724, 'subsample': 0.9195498859150127, 'colsample_bytree': 0.8000853040595031, 'min_child_weight': 3, 'gamma': 3.668712305371031, 'reg_alpha': 2.447858255331488, 'reg_lambda': 0.7935595480795843, 'random_state': 42}
2025-03-28 14:33:26,588 - __main__ - INFO - Trial 23: within_1_strikeout=57.5849, Within 2 K: 87.37%, Over/Under: 73.72%, Params: {'n_estimators': 301, 'max_depth': 11, 'learning_rate': 0.05943123055348829, 'subsample': 0.8288214099909414, 'colsample_bytree': 0.673507890234219, 'min_child_weight': 5, 'gamma': 4.252923249411352, 'reg_alpha': 3.504262425654709, 'reg_lambda': 1.4481357623420608, 'random_state': 42}
2025-03-28 14:33:30,772 - __main__ - INFO - Trial 24: within_1_strikeout=57.2879, Within 2 K: 87.27%, Over/Under: 73.73%, Params: {'n_estimators': 299, 'max_depth': 11, 'learning_rate': 0.06663872857817243, 'subsample': 0.8521460050613258, 'colsample_bytree': 0.706318117445167, 'min_child_weight': 5, 'gamma': 4.293432025580057, 'reg_alpha': 3.26336145670661, 'reg_lambda': 1.4588934034070566, 'random_state': 42}
2025-03-28 14:33:34,744 - __main__ - INFO - Trial 25: within_1_strikeout=57.0873, Within 2 K: 86.94%, Over/Under: 73.65%, Params: {'n_estimators': 183, 'max_depth': 11, 'learning_rate': 0.11715507134728141, 'subsample': 0.8121700766627462, 'colsample_bytree': 0.9986543245741014, 'min_child_weight': 7, 'gamma': 2.85773712815297, 'reg_alpha': 2.4367916776255303, 'reg_lambda': 2.3610560868471144, 'random_state': 42}
2025-03-28 14:33:36,477 - __main__ - INFO - Trial 26: within_1_strikeout=57.4380, Within 2 K: 87.49%, Over/Under: 73.77%, Params: {'n_estimators': 210, 'max_depth': 6, 'learning_rate': 0.07118198649816188, 'subsample': 0.6240560438812228, 'colsample_bytree': 0.5888512702288597, 'min_child_weight': 5, 'gamma': 2.319596342864535, 'reg_alpha': 4.180191267395006, 'reg_lambda': 1.2335030779769647, 'random_state': 42}
2025-03-28 14:33:44,695 - __main__ - INFO - Trial 27: within_1_strikeout=57.4317, Within 2 K: 87.20%, Over/Under: 73.72%, Params: {'n_estimators': 283, 'max_depth': 11, 'learning_rate': 0.03497203235241098, 'subsample': 0.7358426902465833, 'colsample_bytree': 0.7809497432424845, 'min_child_weight': 7, 'gamma': 2.997271840151746, 'reg_alpha': 3.8210057317572326, 'reg_lambda': 0.7137608867924559, 'random_state': 42}
2025-03-28 14:33:48,624 - __main__ - INFO - Trial 28: within_1_strikeout=57.4570, Within 2 K: 87.23%, Over/Under: 73.72%, Params: {'n_estimators': 348, 'max_depth': 8, 'learning_rate': 0.054854723193679934, 'subsample': 0.5451304593378945, 'colsample_bytree': 0.7250542626639445, 'min_child_weight': 2, 'gamma': 4.3697417359129105, 'reg_alpha': 4.655169022328387, 'reg_lambda': 1.9081573655759168, 'random_state': 42}
2025-03-28 14:33:50,129 - __main__ - INFO - Trial 29: within_1_strikeout=56.9010, Within 2 K: 87.74%, Over/Under: 73.69%, Params: {'n_estimators': 327, 'max_depth': 3, 'learning_rate': 0.025492437438256892, 'subsample': 0.8160748395149265, 'colsample_bytree': 0.6395145223861118, 'min_child_weight': 6, 'gamma': 4.919547807821624, 'reg_alpha': 2.84974265886099, 'reg_lambda': 2.6963163223934004, 'random_state': 42}
2025-03-28 14:33:52,746 - __main__ - INFO - Trial 30: within_1_strikeout=57.2848, Within 2 K: 86.92%, Over/Under: 73.62%, Params: {'n_estimators': 385, 'max_depth': 9, 'learning_rate': 0.16137525462817373, 'subsample': 0.8384357771218692, 'colsample_bytree': 0.6791061694900964, 'min_child_weight': 4, 'gamma': 3.5102757466758536, 'reg_alpha': 3.9387878713562965, 'reg_lambda': 1.3201563114482588, 'random_state': 42}
2025-03-28 14:33:57,266 - __main__ - INFO - Trial 31: within_1_strikeout=57.3022, Within 2 K: 87.40%, Over/Under: 73.72%, Params: {'n_estimators': 408, 'max_depth': 10, 'learning_rate': 0.049940295312865673, 'subsample': 0.9024264264097894, 'colsample_bytree': 0.6628994040203644, 'min_child_weight': 4, 'gamma': 3.9501208269174506, 'reg_alpha': 3.466476895701771, 'reg_lambda': 0.41751324865872186, 'random_state': 42}
2025-03-28 14:34:03,067 - __main__ - INFO - Trial 32: within_1_strikeout=57.3622, Within 2 K: 87.52%, Over/Under: 73.72%, Params: {'n_estimators': 461, 'max_depth': 11, 'learning_rate': 0.038104577109105725, 'subsample': 0.8693958660345051, 'colsample_bytree': 0.5914525200752458, 'min_child_weight': 3, 'gamma': 4.567695592504762, 'reg_alpha': 3.812498831137137, 'reg_lambda': 0.26069040719023545, 'random_state': 42}
2025-03-28 14:34:06,954 - __main__ - INFO - Trial 33: within_1_strikeout=57.4759, Within 2 K: 87.30%, Over/Under: 73.71%, Params: {'n_estimators': 281, 'max_depth': 10, 'learning_rate': 0.053314252542771605, 'subsample': 0.8010969911424995, 'colsample_bytree': 0.6286267582253436, 'min_child_weight': 5, 'gamma': 4.259363213111953, 'reg_alpha': 3.3692183728296223, 'reg_lambda': 0.9690045387778202, 'random_state': 42}
2025-03-28 14:34:09,138 - __main__ - INFO - Trial 34: within_1_strikeout=57.3717, Within 2 K: 87.37%, Over/Under: 73.73%, Params: {'n_estimators': 269, 'max_depth': 7, 'learning_rate': 0.07974709527218378, 'subsample': 0.7811444016295481, 'colsample_bytree': 0.6133835983458441, 'min_child_weight': 5, 'gamma': 4.343314819246632, 'reg_alpha': 1.5318046292981453, 'reg_lambda': 0.7897828447040107, 'random_state': 42}
2025-03-28 14:34:14,370 - __main__ - INFO - Trial 35: within_1_strikeout=57.0921, Within 2 K: 86.69%, Over/Under: 73.58%, Params: {'n_estimators': 225, 'max_depth': 11, 'learning_rate': 0.1050752294092143, 'subsample': 0.7225389568054865, 'colsample_bytree': 0.5477803748340213, 'min_child_weight': 6, 'gamma': 2.022621962370938, 'reg_alpha': 2.6278580128476574, 'reg_lambda': 1.7124453883574724, 'random_state': 42}
2025-03-28 14:34:15,857 - __main__ - INFO - Trial 36: within_1_strikeout=57.0652, Within 2 K: 87.88%, Over/Under: 73.78%, Params: {'n_estimators': 152, 'max_depth': 6, 'learning_rate': 0.03063725064241089, 'subsample': 0.7845173033208828, 'colsample_bytree': 0.8300398135885659, 'min_child_weight': 5, 'gamma': 2.5906360265594994, 'reg_alpha': 3.171571888402039, 'reg_lambda': 2.23281236218353, 'random_state': 42}
2025-03-28 14:34:20,123 - __main__ - INFO - Trial 37: within_1_strikeout=57.4522, Within 2 K: 87.15%, Over/Under: 73.69%, Params: {'n_estimators': 289, 'max_depth': 9, 'learning_rate': 0.052817811253761705, 'subsample': 0.6453442414714627, 'colsample_bytree': 0.7442492386550033, 'min_child_weight': 7, 'gamma': 3.5201262379911253, 'reg_alpha': 4.148990014345504, 'reg_lambda': 1.1023829604473863, 'random_state': 42}
2025-03-28 14:34:25,421 - __main__ - INFO - Trial 38: within_1_strikeout=57.1553, Within 2 K: 86.93%, Over/Under: 73.57%, Params: {'n_estimators': 315, 'max_depth': 12, 'learning_rate': 0.08786629019217745, 'subsample': 0.7017259651613678, 'colsample_bytree': 0.6371678641278293, 'min_child_weight': 10, 'gamma': 3.0788384686743067, 'reg_alpha': 1.5361411703020018, 'reg_lambda': 0.6672831866983449, 'random_state': 42}
2025-03-28 14:34:28,001 - __main__ - INFO - Trial 39: within_1_strikeout=57.4601, Within 2 K: 87.38%, Over/Under: 73.76%, Params: {'n_estimators': 337, 'max_depth': 8, 'learning_rate': 0.06541581128647478, 'subsample': 0.8328338472251626, 'colsample_bytree': 0.6941655635461493, 'min_child_weight': 8, 'gamma': 4.972407659288563, 'reg_alpha': 2.6868539075592883, 'reg_lambda': 1.3411366538704919, 'random_state': 42}
2025-03-28 14:34:47,187 - __main__ - INFO - Trial 40: within_1_strikeout=57.3353, Within 2 K: 87.35%, Over/Under: 73.71%, Params: {'n_estimators': 263, 'max_depth': 12, 'learning_rate': 0.024620141615343972, 'subsample': 0.7442571833572647, 'colsample_bytree': 0.614004154212466, 'min_child_weight': 4, 'gamma': 0.6269114427548201, 'reg_alpha': 2.2615695333367642, 'reg_lambda': 4.851166758896059, 'random_state': 42}
2025-03-28 14:34:51,618 - __main__ - INFO - Trial 41: within_1_strikeout=57.4538, Within 2 K: 87.47%, Over/Under: 73.75%, Params: {'n_estimators': 391, 'max_depth': 10, 'learning_rate': 0.04740046141733406, 'subsample': 0.9137575930697619, 'colsample_bytree': 0.654488437931165, 'min_child_weight': 4, 'gamma': 4.126158410527541, 'reg_alpha': 3.6141776819284805, 'reg_lambda': 0.2807612658824462, 'random_state': 42}
2025-03-28 14:34:56,382 - __main__ - INFO - Trial 42: within_1_strikeout=57.4759, Within 2 K: 87.47%, Over/Under: 73.74%, Params: {'n_estimators': 365, 'max_depth': 10, 'learning_rate': 0.03957628292802235, 'subsample': 0.9459382500230807, 'colsample_bytree': 0.717968438105595, 'min_child_weight': 3, 'gamma': 4.604781734728142, 'reg_alpha': 3.1307739990234813, 'reg_lambda': 0.9523219756124477, 'random_state': 42}
2025-03-28 14:35:00,679 - __main__ - INFO - Trial 43: within_1_strikeout=57.4001, Within 2 K: 87.51%, Over/Under: 73.77%, Params: {'n_estimators': 365, 'max_depth': 9, 'learning_rate': 0.031131535159789236, 'subsample': 0.9387017233502907, 'colsample_bytree': 0.7224539737329941, 'min_child_weight': 3, 'gamma': 4.522277262090789, 'reg_alpha': 3.087491150247279, 'reg_lambda': 1.6661981878025576, 'random_state': 42}
2025-03-28 14:35:06,432 - __main__ - INFO - Trial 44: within_1_strikeout=57.3653, Within 2 K: 87.45%, Over/Under: 73.73%, Params: {'n_estimators': 350, 'max_depth': 11, 'learning_rate': 0.039776183351858, 'subsample': 0.9733543972291899, 'colsample_bytree': 0.7614668085230027, 'min_child_weight': 1, 'gamma': 4.7165203403356, 'reg_alpha': 3.30980524431538, 'reg_lambda': 0.984760577537077, 'random_state': 42}
2025-03-28 14:35:09,405 - __main__ - INFO - Trial 45: within_1_strikeout=57.2090, Within 2 K: 87.40%, Over/Under: 73.72%, Params: {'n_estimators': 241, 'max_depth': 10, 'learning_rate': 0.07184397990430225, 'subsample': 0.9404019067782537, 'colsample_bytree': 0.6824259173261938, 'min_child_weight': 5, 'gamma': 4.245746933276449, 'reg_alpha': 2.925364777156929, 'reg_lambda': 0.5998894306505413, 'random_state': 42}
2025-03-28 14:35:11,299 - __main__ - INFO - Trial 46: within_1_strikeout=57.3116, Within 2 K: 87.41%, Over/Under: 73.73%, Params: {'n_estimators': 298, 'max_depth': 6, 'learning_rate': 0.10274519297247667, 'subsample': 0.7994447566675162, 'colsample_bytree': 0.6234620151255235, 'min_child_weight': 6, 'gamma': 4.70210512303788, 'reg_alpha': 4.74839069594913, 'reg_lambda': 1.1905590446038492, 'random_state': 42}
2025-03-28 14:35:13,275 - __main__ - INFO - Trial 47: within_1_strikeout=56.4129, Within 2 K: 87.82%, Over/Under: 73.71%, Params: {'n_estimators': 57, 'max_depth': 9, 'learning_rate': 0.05774912944828439, 'subsample': 0.8685788516948183, 'colsample_bytree': 0.7876350038268404, 'min_child_weight': 3, 'gamma': 1.9958141762894779, 'reg_alpha': 0.2589442453020774, 'reg_lambda': 1.5393616443341314, 'random_state': 42}
2025-03-28 14:35:20,350 - __main__ - INFO - Trial 48: within_1_strikeout=57.4333, Within 2 K: 87.37%, Over/Under: 73.75%, Params: {'n_estimators': 333, 'max_depth': 12, 'learning_rate': 0.042696690151405814, 'subsample': 0.9888951066270366, 'colsample_bytree': 0.7064728277337677, 'min_child_weight': 4, 'gamma': 3.5151980329236028, 'reg_alpha': 3.4249254335058206, 'reg_lambda': 1.9361173747327172, 'random_state': 42}
2025-03-28 14:35:23,108 - __main__ - INFO - Trial 49: within_1_strikeout=56.7067, Within 2 K: 86.34%, Over/Under: 73.51%, Params: {'n_estimators': 436, 'max_depth': 8, 'learning_rate': 0.26964003630355055, 'subsample': 0.9595615585190345, 'colsample_bytree': 0.8792173189030212, 'min_child_weight': 6, 'gamma': 1.2543625466889332, 'reg_alpha': 3.807891555590122, 'reg_lambda': 3.2589861795642507, 'random_state': 42}
2025-03-28 14:35:23,133 - __main__ - INFO - Optimization completed in 3.59 minutes
2025-03-28 14:35:23,137 - __main__ - INFO - Best value: 57.584899699889434
2025-03-28 14:35:23,141 - __main__ - INFO - Best params: {'n_estimators': 301, 'max_depth': 11, 'learning_rate': 0.05943123055348829, 'subsample': 0.8288214099909414, 'colsample_bytree': 0.673507890234219, 'min_child_weight': 5, 'gamma': 4.252923249411352, 'reg_alpha': 3.504262425654709, 'reg_lambda': 1.4481357623420608}
2025-03-28 14:35:25,871 - __main__ - INFO - Best xgboost model saved to models\optimization\xgboost_20250328_143144\optimized_xgboost_model.pkl
2025-03-28 14:35:25,871 - __main__ - INFO - Optimization for xgboost completed. Results saved to models\optimization\xgboost_20250328_143144
2025-03-28 14:35:39,340 - __main__ - INFO - Loading data...
2025-03-28 14:35:39,340 - src.data.db - INFO - Retrieving pitcher data from database...
2025-03-28 14:35:42,731 - src.data.db - INFO - Retrieved 104453 rows of pitcher data with 53 columns
2025-03-28 14:35:42,731 - src.data.db - INFO - Retrieved 20 enhanced feature columns: last_3_games_strikeouts_std, last_5_games_strikeouts_std, last_3_games_velo_std, last_5_games_velo_std, last_3_games_swinging_strike_pct_std...
2025-03-28 14:35:42,731 - __main__ - INFO - Selecting features...
2025-03-28 14:35:42,731 - src.features.selection - INFO - Available columns: ['game_db_id', 'pitcher_id', 'player_name', 'statcast_id', 'game_id', 'game_date', 'season', 'strikeouts', 'hits', 'walks', 'home_runs', 'release_speed_mean', 'release_speed_max', 'release_spin_rate_mean', 'swinging_strike_pct', 'called_strike_pct', 'zone_rate', 'last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'team_changed', 'opponent_team', 'opponent_batting_avg', 'opponent_strikeout_rate', 'opponent_ops', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy']
2025-03-28 14:35:42,731 - src.features.selection - INFO - Selected 31 features for strikeout model: ['last_3_games_strikeouts_avg', 'last_5_games_strikeouts_avg', 'last_3_games_velo_avg', 'last_5_games_velo_avg', 'last_3_games_swinging_strike_pct_avg', 'last_5_games_swinging_strike_pct_avg', 'days_rest', 'last_3_games_strikeouts_std', 'last_5_games_strikeouts_std', 'last_3_games_velo_std', 'last_5_games_velo_std', 'last_3_games_swinging_strike_pct_std', 'last_5_games_swinging_strike_pct_std', 'trend_3_strikeouts', 'trend_5_strikeouts', 'trend_3_release_speed_mean', 'trend_5_release_speed_mean', 'trend_3_swinging_strike_pct', 'trend_5_swinging_strike_pct', 'momentum_3_strikeouts', 'momentum_5_strikeouts', 'momentum_3_release_speed_mean', 'momentum_5_release_speed_mean', 'momentum_3_swinging_strike_pct', 'momentum_5_swinging_strike_pct', 'pitch_entropy', 'prev_game_pitch_entropy', 'last_3_games_called_strike_pct_avg', 'last_5_games_called_strike_pct_avg', 'last_3_games_zone_rate_avg', 'last_5_games_zone_rate_avg']
2025-03-28 14:35:42,742 - __main__ - INFO - Using 63310 rows from years [2019, 2021, 2022] for optimization
2025-03-28 14:35:43,182 - __main__ - INFO - Starting lightgbm optimization with 50 trials...
2025-03-28 14:35:43,182 - __main__ - INFO - Optimizing for within_1_strikeout (maximize)
2025-03-28 14:35:44,692 - __main__ - INFO - Trial 0: within_1_strikeout=57.2643, Within 2 K: 87.62%, Over/Under: 73.72%, Params: {'n_estimators': 221, 'learning_rate': 0.10796831979214092, 'num_leaves': 84, 'max_depth': 4, 'min_data_in_leaf': 66, 'feature_fraction': 0.8139240502539444, 'bagging_fraction': 0.7533819839364846, 'bagging_freq': 2, 'min_gain_to_split': 1.4890313464800564, 'lambda_l1': 3.6538533271707436, 'lambda_l2': 2.1859364038060964, 'random_state': 42}
2025-03-28 14:35:46,549 - __main__ - INFO - Trial 1: within_1_strikeout=57.2848, Within 2 K: 87.27%, Over/Under: 73.68%, Params: {'n_estimators': 265, 'learning_rate': 0.09657646232460775, 'num_leaves': 86, 'max_depth': 9, 'min_data_in_leaf': 21, 'feature_fraction': 0.7566504705844272, 'bagging_fraction': 0.6731695150705785, 'bagging_freq': 9, 'min_gain_to_split': 2.9070670193117865, 'lambda_l1': 4.271066895402901, 'lambda_l2': 0.7732469118101676, 'random_state': 42}
2025-03-28 14:35:49,607 - __main__ - INFO - Trial 2: within_1_strikeout=57.5502, Within 2 K: 87.57%, Over/Under: 73.77%, Params: {'n_estimators': 484, 'learning_rate': 0.046754236887035984, 'num_leaves': 109, 'max_depth': 7, 'min_data_in_leaf': 79, 'feature_fraction': 0.5416042549187491, 'bagging_fraction': 0.8797131911047694, 'bagging_freq': 2, 'min_gain_to_split': 3.457422238328936, 'lambda_l1': 0.8736632320920595, 'lambda_l2': 4.875805492782673, 'random_state': 42}
2025-03-28 14:35:51,214 - __main__ - INFO - Trial 3: within_1_strikeout=56.7588, Within 2 K: 87.75%, Over/Under: 73.74%, Params: {'n_estimators': 76, 'learning_rate': 0.049588894195986, 'num_leaves': 138, 'max_depth': 11, 'min_data_in_leaf': 15, 'feature_fraction': 0.7880020712632197, 'bagging_fraction': 0.877423259122597, 'bagging_freq': 9, 'min_gain_to_split': 0.9518663033714808, 'lambda_l1': 3.0535943463426394, 'lambda_l2': 0.4500746693362684, 'random_state': 42}
2025-03-28 14:35:53,985 - __main__ - INFO - Trial 4: within_1_strikeout=57.4033, Within 2 K: 87.13%, Over/Under: 73.66%, Params: {'n_estimators': 309, 'learning_rate': 0.08425275099743998, 'num_leaves': 81, 'max_depth': 9, 'min_data_in_leaf': 76, 'feature_fraction': 0.6373477583328724, 'bagging_fraction': 0.7328414392141291, 'bagging_freq': 5, 'min_gain_to_split': 1.89815642909618, 'lambda_l1': 3.9955150024899497, 'lambda_l2': 4.241903845982649, 'random_state': 42}
2025-03-28 14:35:55,134 - __main__ - INFO - Trial 5: within_1_strikeout=57.3622, Within 2 K: 87.58%, Over/Under: 73.79%, Params: {'n_estimators': 76, 'learning_rate': 0.07596504915630777, 'num_leaves': 128, 'max_depth': 10, 'min_data_in_leaf': 88, 'feature_fraction': 0.8749110187712349, 'bagging_fraction': 0.9241382381021851, 'bagging_freq': 1, 'min_gain_to_split': 3.877500893772918, 'lambda_l1': 2.093787996382538, 'lambda_l2': 2.788897398661043, 'random_state': 42}
2025-03-28 14:35:57,056 - __main__ - INFO - Trial 6: within_1_strikeout=57.0905, Within 2 K: 87.11%, Over/Under: 73.60%, Params: {'n_estimators': 304, 'learning_rate': 0.12908915641512167, 'num_leaves': 150, 'max_depth': 7, 'min_data_in_leaf': 85, 'feature_fraction': 0.9988305109420019, 'bagging_fraction': 0.5297071221689948, 'bagging_freq': 4, 'min_gain_to_split': 4.015684000745033, 'lambda_l1': 2.952639030395873, 'lambda_l2': 1.4978817803051254, 'random_state': 42}
2025-03-28 14:35:59,904 - __main__ - INFO - Trial 7: within_1_strikeout=57.5344, Within 2 K: 87.56%, Over/Under: 73.80%, Params: {'n_estimators': 338, 'learning_rate': 0.02739073362585905, 'num_leaves': 76, 'max_depth': 9, 'min_data_in_leaf': 44, 'feature_fraction': 0.8435922920289238, 'bagging_fraction': 0.7903085527400496, 'bagging_freq': 5, 'min_gain_to_split': 4.570680500254335, 'lambda_l1': 4.397624990556926, 'lambda_l2': 2.335055467753149, 'random_state': 42}
2025-03-28 14:36:02,636 - __main__ - INFO - Trial 8: within_1_strikeout=57.5865, Within 2 K: 87.58%, Over/Under: 73.76%, Params: {'n_estimators': 235, 'learning_rate': 0.03255464475022521, 'num_leaves': 78, 'max_depth': 8, 'min_data_in_leaf': 18, 'feature_fraction': 0.7961517622900665, 'bagging_fraction': 0.8872144444224084, 'bagging_freq': 10, 'min_gain_to_split': 1.0758894361745956, 'lambda_l1': 3.2648379280950564, 'lambda_l2': 3.1248311834109073, 'random_state': 42}
2025-03-28 14:36:03,816 - __main__ - INFO - Trial 9: within_1_strikeout=52.3567, Within 2 K: 88.38%, Over/Under: 73.76%, Params: {'n_estimators': 95, 'learning_rate': 0.011117760604082741, 'num_leaves': 56, 'max_depth': 7, 'min_data_in_leaf': 49, 'feature_fraction': 0.8864731294262884, 'bagging_fraction': 0.6842052466348025, 'bagging_freq': 3, 'min_gain_to_split': 4.185502241359628, 'lambda_l1': 4.252538946251293, 'lambda_l2': 4.835504026271503, 'random_state': 42}
2025-03-28 14:36:05,020 - __main__ - INFO - Trial 10: within_1_strikeout=57.3495, Within 2 K: 87.41%, Over/Under: 73.69%, Params: {'n_estimators': 179, 'learning_rate': 0.2198940956521869, 'num_leaves': 23, 'max_depth': 4, 'min_data_in_leaf': 29, 'feature_fraction': 0.664583627494643, 'bagging_fraction': 0.9901181696566774, 'bagging_freq': 7, 'min_gain_to_split': 0.4272792006654579, 'lambda_l1': 1.6569730226875146, 'lambda_l2': 3.3825443323801285, 'random_state': 42}
2025-03-28 14:36:08,000 - __main__ - INFO - Trial 11: within_1_strikeout=57.4206, Within 2 K: 87.65%, Over/Under: 73.80%, Params: {'n_estimators': 473, 'learning_rate': 0.03063885647690983, 'num_leaves': 110, 'max_depth': 6, 'min_data_in_leaf': 100, 'feature_fraction': 0.5082138341210888, 'bagging_fraction': 0.8619982163815469, 'bagging_freq': 7, 'min_gain_to_split': 3.043023854718088, 'lambda_l1': 0.09253302036910493, 'lambda_l2': 3.8343021508489143, 'random_state': 42}
2025-03-28 14:36:11,635 - __main__ - INFO - Trial 12: within_1_strikeout=57.4775, Within 2 K: 87.67%, Over/Under: 73.81%, Params: {'n_estimators': 496, 'learning_rate': 0.024109098633645663, 'num_leaves': 110, 'max_depth': 6, 'min_data_in_leaf': 63, 'feature_fraction': 0.510635765377107, 'bagging_fraction': 0.9981623848729196, 'bagging_freq': 10, 'min_gain_to_split': 0.06766174446251494, 'lambda_l1': 0.9609124071960929, 'lambda_l2': 4.885806052856898, 'random_state': 42}
2025-03-28 14:36:15,124 - __main__ - INFO - Trial 13: within_1_strikeout=57.5375, Within 2 K: 87.45%, Over/Under: 73.78%, Params: {'n_estimators': 403, 'learning_rate': 0.044088769894349567, 'num_leaves': 58, 'max_depth': 12, 'min_data_in_leaf': 34, 'feature_fraction': 0.6257031034515955, 'bagging_fraction': 0.8576189897900798, 'bagging_freq': 7, 'min_gain_to_split': 2.076727845155206, 'lambda_l1': 1.2194253201533196, 'lambda_l2': 3.2341266975956624, 'random_state': 42}
2025-03-28 14:36:17,647 - __main__ - INFO - Trial 14: within_1_strikeout=57.1253, Within 2 K: 87.89%, Over/Under: 73.77%, Params: {'n_estimators': 386, 'learning_rate': 0.015526242610962044, 'num_leaves': 108, 'max_depth': 5, 'min_data_in_leaf': 64, 'feature_fraction': 0.7036089436742291, 'bagging_fraction': 0.8163726012494644, 'bagging_freq': 1, 'min_gain_to_split': 2.585348373424023, 'lambda_l1': 0.3917580319081122, 'lambda_l2': 4.10201603156592, 'random_state': 42}
2025-03-28 14:36:19,269 - __main__ - INFO - Trial 15: within_1_strikeout=57.1300, Within 2 K: 87.71%, Over/Under: 73.74%, Params: {'n_estimators': 164, 'learning_rate': 0.03621382828472605, 'num_leaves': 44, 'max_depth': 8, 'min_data_in_leaf': 10, 'feature_fraction': 0.582280189787836, 'bagging_fraction': 0.9218746705628877, 'bagging_freq': 3, 'min_gain_to_split': 3.61402861458686, 'lambda_l1': 2.4779755950751756, 'lambda_l2': 1.6374525614695967, 'random_state': 42}
2025-03-28 14:36:23,502 - __main__ - INFO - Trial 16: within_1_strikeout=57.4396, Within 2 K: 87.63%, Over/Under: 73.78%, Params: {'n_estimators': 408, 'learning_rate': 0.018826069066657097, 'num_leaves': 99, 'max_depth': 8, 'min_data_in_leaf': 44, 'feature_fraction': 0.9468118809590098, 'bagging_fraction': 0.9198520327836328, 'bagging_freq': 6, 'min_gain_to_split': 3.303915178940492, 'lambda_l1': 3.352856965035307, 'lambda_l2': 3.2153721575161516, 'random_state': 42}
2025-03-28 14:36:25,103 - __main__ - INFO - Trial 17: within_1_strikeout=57.2090, Within 2 K: 86.97%, Over/Under: 73.64%, Params: {'n_estimators': 233, 'learning_rate': 0.17273897099647853, 'num_leaves': 126, 'max_depth': 6, 'min_data_in_leaf': 78, 'feature_fraction': 0.6995946296017408, 'bagging_fraction': 0.5709501887740782, 'bagging_freq': 10, 'min_gain_to_split': 1.2257733988435944, 'lambda_l1': 4.906545765165747, 'lambda_l2': 4.381990557407058, 'random_state': 42}
2025-03-28 14:36:26,030 - __main__ - INFO - Trial 18: within_1_strikeout=57.1411, Within 2 K: 87.69%, Over/Under: 73.70%, Params: {'n_estimators': 155, 'learning_rate': 0.06033315395784669, 'num_leaves': 64, 'max_depth': 3, 'min_data_in_leaf': 97, 'feature_fraction': 0.5535450283106151, 'bagging_fraction': 0.8271567817502676, 'bagging_freq': 8, 'min_gain_to_split': 2.3169819790627564, 'lambda_l1': 2.1424672862854557, 'lambda_l2': 3.7428804359912373, 'random_state': 42}
2025-03-28 14:36:31,232 - __main__ - INFO - Trial 19: within_1_strikeout=57.2911, Within 2 K: 87.15%, Over/Under: 73.69%, Params: {'n_estimators': 446, 'learning_rate': 0.060910795657792755, 'num_leaves': 96, 'max_depth': 10, 'min_data_in_leaf': 55, 'feature_fraction': 0.7288073398508927, 'bagging_fraction': 0.9440396288086946, 'bagging_freq': 4, 'min_gain_to_split': 0.6786116503409356, 'lambda_l1': 0.895900740851761, 'lambda_l2': 2.747170626507432, 'random_state': 42}
2025-03-28 14:36:34,062 - __main__ - INFO - Trial 20: within_1_strikeout=57.2990, Within 2 K: 87.78%, Over/Under: 73.80%, Params: {'n_estimators': 355, 'learning_rate': 0.01917064773917993, 'num_leaves': 34, 'max_depth': 7, 'min_data_in_leaf': 35, 'feature_fraction': 0.7644560667636384, 'bagging_fraction': 0.6356648751929228, 'bagging_freq': 2, 'min_gain_to_split': 1.7146142201695662, 'lambda_l1': 1.590743628257848, 'lambda_l2': 1.4988304713032783, 'random_state': 42}
2025-03-28 14:36:37,620 - __main__ - INFO - Trial 21: within_1_strikeout=57.4112, Within 2 K: 87.48%, Over/Under: 73.74%, Params: {'n_estimators': 423, 'learning_rate': 0.042407108897092746, 'num_leaves': 59, 'max_depth': 12, 'min_data_in_leaf': 29, 'feature_fraction': 0.6097733384229741, 'bagging_fraction': 0.852734920818093, 'bagging_freq': 7, 'min_gain_to_split': 2.1186652106005037, 'lambda_l1': 1.071333111685589, 'lambda_l2': 3.0892524561613723, 'random_state': 42}
2025-03-28 14:36:40,786 - __main__ - INFO - Trial 22: within_1_strikeout=57.4885, Within 2 K: 87.59%, Over/Under: 73.77%, Params: {'n_estimators': 462, 'learning_rate': 0.039703681055215684, 'num_leaves': 68, 'max_depth': 12, 'min_data_in_leaf': 24, 'feature_fraction': 0.5638071212656351, 'bagging_fraction': 0.8862175066223541, 'bagging_freq': 8, 'min_gain_to_split': 2.6928772521103745, 'lambda_l1': 1.4504655160498057, 'lambda_l2': 3.597511927457576, 'random_state': 42}
2025-03-28 14:36:43,967 - __main__ - INFO - Trial 23: within_1_strikeout=57.3890, Within 2 K: 87.49%, Over/Under: 73.77%, Params: {'n_estimators': 383, 'learning_rate': 0.0530953016465464, 'num_leaves': 48, 'max_depth': 11, 'min_data_in_leaf': 40, 'feature_fraction': 0.6557183669833855, 'bagging_fraction': 0.7867559051597672, 'bagging_freq': 6, 'min_gain_to_split': 1.325835268000654, 'lambda_l1': 0.5420143010758081, 'lambda_l2': 1.9889028296444673, 'random_state': 42}
2025-03-28 14:36:46,987 - __main__ - INFO - Trial 24: within_1_strikeout=57.4143, Within 2 K: 87.65%, Over/Under: 73.79%, Params: {'n_estimators': 498, 'learning_rate': 0.033669779044646846, 'num_leaves': 71, 'max_depth': 10, 'min_data_in_leaf': 15, 'feature_fraction': 0.6062166292198143, 'bagging_fraction': 0.9633663368564375, 'bagging_freq': 9, 'min_gain_to_split': 3.3606287320801527, 'lambda_l1': 2.6503040811204097, 'lambda_l2': 4.560214667582375, 'random_state': 42}
2025-03-28 14:36:48,755 - __main__ - INFO - Trial 25: within_1_strikeout=57.1205, Within 2 K: 87.86%, Over/Under: 73.76%, Params: {'n_estimators': 262, 'learning_rate': 0.023986653055581234, 'num_leaves': 97, 'max_depth': 5, 'min_data_in_leaf': 35, 'feature_fraction': 0.5462020809239883, 'bagging_fraction': 0.903237851536077, 'bagging_freq': 8, 'min_gain_to_split': 4.991828906564665, 'lambda_l1': 1.9333649798213717, 'lambda_l2': 2.7826427545812376, 'random_state': 42}
2025-03-28 14:36:51,875 - __main__ - INFO - Trial 26: within_1_strikeout=57.2769, Within 2 K: 87.31%, Over/Under: 73.77%, Params: {'n_estimators': 425, 'learning_rate': 0.06810768264148676, 'num_leaves': 120, 'max_depth': 8, 'min_data_in_leaf': 54, 'feature_fraction': 0.6909428253942155, 'bagging_fraction': 0.8252771406202198, 'bagging_freq': 10, 'min_gain_to_split': 2.141299617224406, 'lambda_l1': 1.1609594488841208, 'lambda_l2': 3.9717715846677435, 'random_state': 42}
2025-03-28 14:36:54,531 - __main__ - INFO - Trial 27: within_1_strikeout=57.4538, Within 2 K: 87.50%, Over/Under: 73.77%, Params: {'n_estimators': 207, 'learning_rate': 0.04629437375104619, 'num_leaves': 91, 'max_depth': 11, 'min_data_in_leaf': 24, 'feature_fraction': 0.5964493619296987, 'bagging_fraction': 0.7566671854127934, 'bagging_freq': 4, 'min_gain_to_split': 0.9585599031438112, 'lambda_l1': 0.5689959220587271, 'lambda_l2': 3.399385729517325, 'random_state': 42}
2025-03-28 14:36:55,528 - __main__ - INFO - Trial 28: within_1_strikeout=57.1458, Within 2 K: 87.09%, Over/Under: 73.69%, Params: {'n_estimators': 128, 'learning_rate': 0.2885509142941246, 'num_leaves': 51, 'max_depth': 5, 'min_data_in_leaf': 74, 'feature_fraction': 0.6375365023203415, 'bagging_fraction': 0.8498409782711736, 'bagging_freq': 6, 'min_gain_to_split': 1.7894103670376122, 'lambda_l1': 2.355093284028266, 'lambda_l2': 0.026935874174681018, 'random_state': 42}
2025-03-28 14:36:56,737 - __main__ - INFO - Trial 29: within_1_strikeout=57.4080, Within 2 K: 87.55%, Over/Under: 73.72%, Params: {'n_estimators': 229, 'learning_rate': 0.13033806101599751, 'num_leaves': 37, 'max_depth': 3, 'min_data_in_leaf': 69, 'feature_fraction': 0.8173256196325955, 'bagging_fraction': 0.7417514148921531, 'bagging_freq': 3, 'min_gain_to_split': 1.5219176945024482, 'lambda_l1': 0.051210288473599874, 'lambda_l2': 2.160554883587883, 'random_state': 42}
2025-03-28 14:37:00,372 - __main__ - INFO - Trial 30: within_1_strikeout=56.4303, Within 2 K: 88.04%, Over/Under: 73.76%, Params: {'n_estimators': 301, 'learning_rate': 0.012288572826972339, 'num_leaves': 78, 'max_depth': 9, 'min_data_in_leaf': 32, 'feature_fraction': 0.5284088530375954, 'bagging_fraction': 0.9625438984224376, 'bagging_freq': 2, 'min_gain_to_split': 0.12638131675988928, 'lambda_l1': 3.643442231588688, 'lambda_l2': 4.613155505725717, 'random_state': 42}
2025-03-28 14:37:03,227 - __main__ - INFO - Trial 31: within_1_strikeout=57.5265, Within 2 K: 87.58%, Over/Under: 73.79%, Params: {'n_estimators': 348, 'learning_rate': 0.027344239737288334, 'num_leaves': 74, 'max_depth': 9, 'min_data_in_leaf': 43, 'feature_fraction': 0.8273566655251691, 'bagging_fraction': 0.7707308069748768, 'bagging_freq': 5, 'min_gain_to_split': 4.699043319169761, 'lambda_l1': 4.9481906190966995, 'lambda_l2': 2.3679451561999345, 'random_state': 42}
2025-03-28 14:37:06,414 - __main__ - INFO - Trial 32: within_1_strikeout=57.5138, Within 2 K: 87.61%, Over/Under: 73.79%, Params: {'n_estimators': 353, 'learning_rate': 0.020693187316426314, 'num_leaves': 87, 'max_depth': 8, 'min_data_in_leaf': 56, 'feature_fraction': 0.8600999148234126, 'bagging_fraction': 0.819305130859835, 'bagging_freq': 5, 'min_gain_to_split': 4.4718953758843165, 'lambda_l1': 4.521019937898803, 'lambda_l2': 1.8540668410380512, 'random_state': 42}
2025-03-28 14:37:09,290 - __main__ - INFO - Trial 33: within_1_strikeout=57.5012, Within 2 K: 87.62%, Over/Under: 73.80%, Params: {'n_estimators': 324, 'learning_rate': 0.02980923586318459, 'num_leaves': 64, 'max_depth': 7, 'min_data_in_leaf': 17, 'feature_fraction': 0.7857347296859823, 'bagging_fraction': 0.7942706304536586, 'bagging_freq': 9, 'min_gain_to_split': 2.8916762751635163, 'lambda_l1': 3.627507058526509, 'lambda_l2': 2.5305360815564852, 'random_state': 42}
2025-03-28 14:37:10,802 - __main__ - INFO - Trial 34: within_1_strikeout=57.5565, Within 2 K: 87.52%, Over/Under: 73.79%, Params: {'n_estimators': 384, 'learning_rate': 0.09652284523725994, 'num_leaves': 81, 'max_depth': 9, 'min_data_in_leaf': 39, 'feature_fraction': 0.913613538896151, 'bagging_fraction': 0.7071009106741134, 'bagging_freq': 7, 'min_gain_to_split': 4.387721905569207, 'lambda_l1': 3.978248841413651, 'lambda_l2': 1.1102787503036122, 'random_state': 42}
2025-03-28 14:37:12,582 - __main__ - INFO - Trial 35: within_1_strikeout=57.5265, Within 2 K: 87.33%, Over/Under: 73.73%, Params: {'n_estimators': 383, 'learning_rate': 0.1109274081396213, 'num_leaves': 84, 'max_depth': 10, 'min_data_in_leaf': 20, 'feature_fraction': 0.8987522635686799, 'bagging_fraction': 0.7012619430385403, 'bagging_freq': 7, 'min_gain_to_split': 3.674077588451113, 'lambda_l1': 3.219646018582792, 'lambda_l2': 1.0444923863939302, 'random_state': 42}
2025-03-28 14:37:14,042 - __main__ - INFO - Trial 36: within_1_strikeout=57.4001, Within 2 K: 87.49%, Over/Under: 73.69%, Params: {'n_estimators': 272, 'learning_rate': 0.09445902077741111, 'num_leaves': 106, 'max_depth': 12, 'min_data_in_leaf': 10, 'feature_fraction': 0.9285285303109831, 'bagging_fraction': 0.6365149994407039, 'bagging_freq': 8, 'min_gain_to_split': 4.326985418567004, 'lambda_l1': 3.872296522820717, 'lambda_l2': 0.763297711391584, 'random_state': 42}
2025-03-28 14:37:15,862 - __main__ - INFO - Trial 37: within_1_strikeout=57.4459, Within 2 K: 87.46%, Over/Under: 73.79%, Params: {'n_estimators': 458, 'learning_rate': 0.08452573745650764, 'num_leaves': 116, 'max_depth': 11, 'min_data_in_leaf': 38, 'feature_fraction': 0.998901861267958, 'bagging_fraction': 0.7157357307601456, 'bagging_freq': 9, 'min_gain_to_split': 3.9317114054614892, 'lambda_l1': 2.9871073407330297, 'lambda_l2': 1.156285695323908, 'random_state': 42}
2025-03-28 14:37:19,406 - __main__ - INFO - Trial 38: within_1_strikeout=57.5723, Within 2 K: 87.34%, Over/Under: 73.70%, Params: {'n_estimators': 438, 'learning_rate': 0.04989327047060011, 'num_leaves': 133, 'max_depth': 9, 'min_data_in_leaf': 27, 'feature_fraction': 0.9553458124923938, 'bagging_fraction': 0.6556994746327944, 'bagging_freq': 6, 'min_gain_to_split': 3.3692157782686634, 'lambda_l1': 2.743091253533799, 'lambda_l2': 0.38607905462760117, 'random_state': 42}
2025-03-28 14:37:22,181 - __main__ - INFO - Trial 39: within_1_strikeout=57.4633, Within 2 K: 87.22%, Over/Under: 73.77%, Params: {'n_estimators': 433, 'learning_rate': 0.07370097113003433, 'num_leaves': 145, 'max_depth': 9, 'min_data_in_leaf': 26, 'feature_fraction': 0.9633301688033282, 'bagging_fraction': 0.653122792769803, 'bagging_freq': 4, 'min_gain_to_split': 3.2678621074592784, 'lambda_l1': 3.406771684115652, 'lambda_l2': 0.23367904347447133, 'random_state': 42}
2025-03-28 14:37:24,952 - __main__ - INFO - Trial 40: within_1_strikeout=57.6070, Within 2 K: 87.40%, Over/Under: 73.76%, Params: {'n_estimators': 479, 'learning_rate': 0.055862321077826696, 'num_leaves': 132, 'max_depth': 9, 'min_data_in_leaf': 83, 'feature_fraction': 0.9242828184094711, 'bagging_fraction': 0.690593377199224, 'bagging_freq': 6, 'min_gain_to_split': 4.131491089443955, 'lambda_l1': 2.6953333869498803, 'lambda_l2': 0.375665856311467, 'random_state': 42}
2025-03-28 14:37:28,364 - __main__ - INFO - Trial 41: within_1_strikeout=57.5517, Within 2 K: 87.32%, Over/Under: 73.78%, Params: {'n_estimators': 458, 'learning_rate': 0.050816277454933785, 'num_leaves': 135, 'max_depth': 9, 'min_data_in_leaf': 87, 'feature_fraction': 0.9139806571557155, 'bagging_fraction': 0.6043406003379219, 'bagging_freq': 6, 'min_gain_to_split': 3.6475650164103857, 'lambda_l1': 2.6033901294326935, 'lambda_l2': 0.569313309891248, 'random_state': 42}
2025-03-28 14:37:31,707 - __main__ - INFO - Trial 42: within_1_strikeout=57.4048, Within 2 K: 87.29%, Over/Under: 73.76%, Params: {'n_estimators': 465, 'learning_rate': 0.05460034828067833, 'num_leaves': 133, 'max_depth': 9, 'min_data_in_leaf': 87, 'feature_fraction': 0.9186355720927117, 'bagging_fraction': 0.613670596679043, 'bagging_freq': 6, 'min_gain_to_split': 3.735882279658404, 'lambda_l1': 2.73068122007813, 'lambda_l2': 0.5219821933283776, 'random_state': 42}
2025-03-28 14:37:33,250 - __main__ - INFO - Trial 43: within_1_strikeout=57.4728, Within 2 K: 87.17%, Over/Under: 73.64%, Params: {'n_estimators': 434, 'learning_rate': 0.1397785792286023, 'num_leaves': 142, 'max_depth': 8, 'min_data_in_leaf': 92, 'feature_fraction': 0.962308065098953, 'bagging_fraction': 0.5951237157981978, 'bagging_freq': 6, 'min_gain_to_split': 4.076430113710082, 'lambda_l1': 2.772899111431978, 'lambda_l2': 0.5718314570865889, 'random_state': 42}
2025-03-28 14:37:34,848 - __main__ - INFO - Trial 44: within_1_strikeout=57.4617, Within 2 K: 87.50%, Over/Under: 73.74%, Params: {'n_estimators': 481, 'learning_rate': 0.1052386772355945, 'num_leaves': 126, 'max_depth': 10, 'min_data_in_leaf': 49, 'feature_fraction': 0.9115780125925456, 'bagging_fraction': 0.6777889818585143, 'bagging_freq': 5, 'min_gain_to_split': 4.8657544428175505, 'lambda_l1': 4.060151429487969, 'lambda_l2': 1.1913052686888554, 'random_state': 42}
2025-03-28 14:37:37,493 - __main__ - INFO - Trial 45: within_1_strikeout=57.5596, Within 2 K: 87.29%, Over/Under: 73.73%, Params: {'n_estimators': 409, 'learning_rate': 0.06373824991460003, 'num_leaves': 136, 'max_depth': 9, 'min_data_in_leaf': 94, 'feature_fraction': 0.8764778174554877, 'bagging_fraction': 0.5351677579472099, 'bagging_freq': 7, 'min_gain_to_split': 4.343380224755228, 'lambda_l1': 3.1387164268180126, 'lambda_l2': 0.25791424946416275, 'random_state': 42}
2025-03-28 14:37:39,298 - __main__ - INFO - Trial 46: within_1_strikeout=57.4112, Within 2 K: 87.06%, Over/Under: 73.63%, Params: {'n_estimators': 252, 'learning_rate': 0.0848845561823297, 'num_leaves': 148, 'max_depth': 10, 'min_data_in_leaf': 83, 'feature_fraction': 0.868300289959912, 'bagging_fraction': 0.5491140505201311, 'bagging_freq': 7, 'min_gain_to_split': 4.3455806215908055, 'lambda_l1': 3.1344675185528184, 'lambda_l2': 0.23038678915663818, 'random_state': 42}
2025-03-28 14:37:41,216 - __main__ - INFO - Trial 47: within_1_strikeout=57.5944, Within 2 K: 87.57%, Over/Under: 73.79%, Params: {'n_estimators': 402, 'learning_rate': 0.06561516603260129, 'num_leaves': 118, 'max_depth': 8, 'min_data_in_leaf': 93, 'feature_fraction': 0.8410988428946916, 'bagging_fraction': 0.715483178832734, 'bagging_freq': 7, 'min_gain_to_split': 4.654573447257778, 'lambda_l1': 3.479309541795381, 'lambda_l2': 0.007042457961236703, 'random_state': 42}
2025-03-28 14:37:42,696 - __main__ - INFO - Trial 48: within_1_strikeout=57.5423, Within 2 K: 87.49%, Over/Under: 73.78%, Params: {'n_estimators': 197, 'learning_rate': 0.06354859999697239, 'num_leaves': 141, 'max_depth': 8, 'min_data_in_leaf': 94, 'feature_fraction': 0.7961127990249737, 'bagging_fraction': 0.5140590436376147, 'bagging_freq': 8, 'min_gain_to_split': 4.773025395764025, 'lambda_l1': 3.493909441883388, 'lambda_l2': 0.005648833875709025, 'random_state': 42}
2025-03-28 14:37:44,891 - __main__ - INFO - Trial 49: within_1_strikeout=57.4759, Within 2 K: 87.60%, Over/Under: 73.80%, Params: {'n_estimators': 299, 'learning_rate': 0.040892259743441094, 'num_leaves': 130, 'max_depth': 7, 'min_data_in_leaf': 100, 'feature_fraction': 0.837912104268825, 'bagging_fraction': 0.7260583684236531, 'bagging_freq': 7, 'min_gain_to_split': 4.207160271858422, 'lambda_l1': 2.893730157874718, 'lambda_l2': 0.8300876689679916, 'random_state': 42}
2025-03-28 14:37:44,914 - __main__ - INFO - Optimization completed in 2.03 minutes
2025-03-28 14:37:44,918 - __main__ - INFO - Best value: 57.60701311009319
2025-03-28 14:37:44,921 - __main__ - INFO - Best params: {'n_estimators': 479, 'learning_rate': 0.055862321077826696, 'num_leaves': 132, 'max_depth': 9, 'min_data_in_leaf': 83, 'feature_fraction': 0.9242828184094711, 'bagging_fraction': 0.690593377199224, 'bagging_freq': 6, 'min_gain_to_split': 4.131491089443955, 'lambda_l1': 2.6953333869498803, 'lambda_l2': 0.375665856311467}
2025-03-28 14:37:47,278 - __main__ - INFO - Best lightgbm model saved to models\optimization\lightgbm_20250328_143539\optimized_lightgbm_model.pkl
2025-03-28 14:37:47,279 - __main__ - INFO - Optimization for lightgbm completed. Results saved to models\optimization\lightgbm_20250328_143539
